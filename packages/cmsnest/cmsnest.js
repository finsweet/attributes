(()=>{var st=Object.defineProperty;var nt=(t,e,r)=>e in t?st(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var U=(t,e,r)=>(nt(t,typeof e!="symbol"?e+"":e,r),r);var V="@finsweet/attributes-cmscore";var l=class{static activateAlerts(){this.alertsActivated=!0}static alert(e,r){if(this.alertsActivated&&window.alert(e),r==="error")throw new Error(e)}};U(l,"alertsActivated",!1);var v={wrapper:"w-dyn-list",list:"w-dyn-items",item:"w-dyn-item",paginationWrapper:"w-pagination-wrapper",paginationNext:"w-pagination-next",paginationPrevious:"w-pagination-previous",pageCount:"w-page-count",emptyState:"w-dyn-empty"};var M=(t,e=!0)=>t.cloneNode(e);var{wrapper:ct,list:at,paginationWrapper:pt,paginationNext:lt,paginationPrevious:mt,emptyState:ut,pageCount:ft}=v;function w(t,e,r=document){let n=typeof t=="string"?r.querySelector(t):t;if(!n)return;let s=n.closest(`.${ct}`);if(!s)return;let o=s.querySelector(`.${at}`);return e==="wrapper"?s:e==="list"?o:e==="items"?[...(o==null?void 0:o.children)||[]]:e==="pageCount"?s.querySelector(`.${ft}`):e==="empty"?s.querySelector(`:scope > .${ut}`):e==="pagination"?s.querySelector(`.${pt}`):s.querySelector(`.${e==="next"?lt:mt}`)}var P=(t,e=document)=>{t=t.filter(o=>o);let r=t.join(", ")||`.${v.wrapper}`;return[...e.querySelectorAll(r)].reduce((o,i)=>{if(!i)return o;let c=w(i,"wrapper");return!c||o.includes(c)||o.push(c),o},[])};function S(t){return t==null?void 0:t.trim().toLowerCase()}var dt=`https://cdn.jsdelivr.net/npm/${V}@1/cmscore.js`,x=async()=>{let{fsAttributes:t}=window;t.cms||(t.cms={});let{cms:e}=t;if(e.coreImport)return e.coreImport;try{let r=import(dt);return e.coreImport=r,r.then(n=>{n&&(e.coreVersion||(e.coreVersion=n.version))}),r}catch(r){l.alert(`${r}`,"error");return}};var b="fs-attributes";var wt=`${b}-support`,St="https://cdn.jsdelivr.net/npm/@finsweet/attributes-support@1/support.js",K=async()=>{let{fsAttributes:t,location:e}=window,{host:r,searchParams:n}=new URL(e.href);if(!r.includes("webflow.io")||!n.has(wt))return!1;if(t.supportImport)return t.supportImport;try{t.supportImport=new Promise((s,o)=>{let i=document.createElement("script");i.src=St,i.onload=()=>s(!0),i.onerror=o,document.head.append(i)})}catch(s){return!1}return t.supportImport};var k=t=>{let e=(n,s,o)=>{let i=t[n],{key:c,values:p}=i,m;if(!s)return`[${c}]`;let y=p==null?void 0:p[s];if(typeof y=="string"?m=y:m=y(o&&"instanceIndex"in o?o.instanceIndex:void 0),!(o!=null&&o.operator))return`[${c}="${m}"]`;switch(o.operator){case"prefixed":return`[${c}^="${m}"]`;case"suffixed":return`[${c}$="${m}"]`;case"contains":return`[${c}*="${m}"]`}};return[e,(n,s)=>{let o=e("element",n,s);return((s==null?void 0:s.scope)||document).querySelector(o)}]};var C={preventLoad:{key:`${b}-preventload`},debugMode:{key:`${b}-debug`},src:{key:"src",values:{finsweet:"@finsweet/attributes"}},dev:{key:`${b}-dev`}},[$,pe]=k(C);var q=()=>{let{currentScript:t}=document,{preventLoad:e,debugMode:r}=C,n=typeof(t==null?void 0:t.getAttribute(e.key))=="string";return typeof(t==null?void 0:t.getAttribute(r.key))=="string"&&l.activateAlerts(),{preventsLoad:n}};var W=()=>{if(window.fsAttributes&&!Array.isArray(window.fsAttributes))return;let t={cms:{},push(...e){var r,n;for(let[s,o]of e)(n=(r=this[s])==null?void 0:r.loading)==null||n.then(o)}};bt(t),gt(t),window.fsAttributes=t,window.FsAttributes=window.fsAttributes,K()},bt=t=>{let e=$("src","finsweet",{operator:"contains"}),r=$("dev"),s=[...document.querySelectorAll(`script${e}, script${r}`)].reduce((o,i)=>{var p;let c=i.getAttribute(C.dev.key)||((p=i.src.match(/[\w-. ]+(?=(\.js)$)/))==null?void 0:p[0]);return c&&!o.includes(c)&&o.push(c),o},[]);for(let o of s){t[o]={};let i=t[o];i.loading=new Promise(c=>{i.resolve=p=>{c(p),delete i.resolve}})}},gt=t=>{let e=Array.isArray(window.fsAttributes)?window.fsAttributes:[];t.push(...e)};var z="1.6.2";var g="cmsnest",R=`fs-${g}`,xt="list",Ct="collection",Et="empty",E={element:{key:`${R}-element`,values:{list:xt}},collection:{key:`${R}-${Ct}`},empty:{key:`${R}-${Et}`}},[u,Ae]=k(E);var{collection:{key:H},empty:{key:At}}=E,X=({createCMSListInstances:t})=>{let e=new Map,r=t([u("collection")]);for(let n of r){let s=S(n.getAttribute(H));if(!s)continue;let o=document.querySelector(`[${At}^="${s}"]`);o&&(o.style.display="none"),n.wrapper.style.display="none",e.set(s,{listInstance:n,emptyElement:o})}return e},G=t=>{let e=new Map,r=t.querySelectorAll(`${u("collection")}:not(a)`);for(let n of r){let s=S(n.getAttribute(H));!s||e.set(s,n)}return e};var ht=new DOMParser,Y=new Map,J=async t=>{try{let e=Y.get(t);if(e)return e;let r=new Promise(async n=>{let o=await(await fetch(t)).text(),i=ht.parseFromString(o,"text/html");n(i)});return Y.set(t,r),r}catch(e){return null}};var A=async({element:t,href:e},r,n)=>{if(!e)return;let{CMSList:s,CMSItem:o}=n,i=G(t);if(!i.size)return;let c=await J(e);if(!c)return;let p=P([u("collection")],c);await Promise.all(p.map(async(m,y)=>{let B=new s(m,y),N=S(B.getAttribute(E.collection.key));if(!N)return;let F=r.get(N),h=i.get(N);if(!F||!h)return;let D=h.parentElement;if(!D)return;let{listInstance:j,emptyElement:L}=F,_=B.items.reduce((a,{href:d})=>{if(!d)return a;let T=j.items.find(I=>I.href&&d===I.href);return T&&a.push(T),a},[]);if(!_.length&&!L)return;let f=M(j.wrapper),ot=w(f,"items");if(f.style.display="",_.length)for(let a of ot){if(!!!_.find(({element:I})=>I.isEqualNode(a))){a.remove();continue}let T=new o(a,f);await A(T,r,n)}else if(L){let a=w(f,"list");a==null||a.remove();let d=M(L);d.style.display="",f.appendChild(d)}D.insertBefore(f,h),h.remove()}))};var Q=(t,e,r)=>{t.on("shouldnest",async n=>{await Promise.all(n.map(s=>A(s,e,r)))})};var Z=async(t,e)=>{let r=X(e);if(!r.size){l.alert(`No collections to nest found for the list n\xBA ${t.index}`,"info");return}Q(t,r,e);let n=[...t.items];await Promise.all(n.map(s=>A(s,r,e))),await t.emitSerial("nestinitialitems",n)};var O=async()=>{var r,n;let t=await x();if(!t)return[];let e=t.createCMSListInstances([u("element","list",{operator:"prefixed"})]);return await Promise.all(e.map(s=>Z(s,t))),(n=(r=window.fsAttributes[g]).resolve)==null||n.call(r,e),e};W();x();var tt,et;(tt=window.fsAttributes)[et=g]||(tt[et]={});var{preventsLoad:Tt}=q(),rt=window.fsAttributes[g];rt.version=z;Tt?rt.init=O:(window.Webflow||(window.Webflow=[]),window.Webflow.push(O));})();
