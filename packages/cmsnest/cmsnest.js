(()=>{var st=Object.defineProperty;var nt=(t,e,o)=>e in t?st(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var U=(t,e,o)=>(nt(t,typeof e!="symbol"?e+"":e,o),o);var V="@finsweet/attributes-cmscore";var l=class{static activateAlerts(){this.alertsActivated=!0}static alert(e,o){if(this.alertsActivated&&window.alert(e),o==="error")throw new Error(e)}};U(l,"alertsActivated",!1);var v={wrapper:"w-dyn-list",list:"w-dyn-items",item:"w-dyn-item",paginationWrapper:"w-pagination-wrapper",paginationNext:"w-pagination-next",paginationPrevious:"w-pagination-previous",pageCount:"w-page-count",emptyState:"w-dyn-empty"};var M=(t,e=!0)=>t.cloneNode(e);var{wrapper:ct,list:at,paginationWrapper:pt,paginationNext:lt,paginationPrevious:mt,emptyState:ut,pageCount:ft}=v;function w(t,e,o=document){let n=typeof t=="string"?o.querySelector(t):t;if(!n)return;let s=n.closest(`.${ct}`);if(!s)return;let r=s.querySelector(`.${at}`);return e==="wrapper"?s:e==="list"?r:e==="items"?[...(r==null?void 0:r.children)||[]]:e==="pageCount"?s.querySelector(`.${ft}`):e==="empty"?s.querySelector(`:scope > .${ut}`):e==="pagination"?s.querySelector(`.${pt}`):s.querySelector(`.${e==="next"?lt:mt}`)}var P=(t,e=document)=>{t=t.filter(r=>r);let o=t.join(", ")||`.${v.wrapper}`;return[...e.querySelectorAll(o)].reduce((r,i)=>{if(!i)return r;let c=w(i,"wrapper");return!c||r.includes(c)||r.push(c),r},[])};function S(t){return t==null?void 0:t.trim().toLowerCase()}var dt=`https://cdn.jsdelivr.net/npm/${V}@1/cmscore.js`,x=async()=>{let{fsAttributes:t}=window;t.cms||(t.cms={});let{cms:e}=t;if(e.coreImport)return e.coreImport;try{let o=import(dt);return e.coreImport=o,o.then(n=>{n&&(e.coreVersion||(e.coreVersion=n.version))}),o}catch(o){l.alert(`${o}`,"error");return}};var b="fs-attributes";var wt=`${b}-support`,St="https://cdn.jsdelivr.net/npm/@finsweet/attributes-support@1/support.js",K=async()=>{let{fsAttributes:t,location:e}=window,{host:o,searchParams:n}=new URL(e.href);if(!o.includes("webflow.io")||!n.has(wt))return!1;if(t.supportImport)return t.supportImport;try{t.supportImport=new Promise((s,r)=>{let i=document.createElement("script");i.src=St,i.onload=()=>s(!0),i.onerror=r,document.head.append(i)})}catch(s){return!1}return t.supportImport};var k=t=>{let e=(n,s,r)=>{let i=t[n],{key:c,values:p}=i,m;if(!s)return`[${c}]`;let y=p==null?void 0:p[s];if(typeof y=="string"?m=y:m=y(r&&"instanceIndex"in r?r.instanceIndex:void 0),!(r!=null&&r.operator))return`[${c}="${m}"]`;switch(r.operator){case"prefixed":return`[${c}^="${m}"]`;case"suffixed":return`[${c}$="${m}"]`;case"contains":return`[${c}*="${m}"]`}};return[e,(n,s)=>{let r=e("element",n,s);return((s==null?void 0:s.scope)||document).querySelector(r)}]};var C={preventLoad:{key:`${b}-preventload`},debugMode:{key:`${b}-debug`},src:{key:"src",values:{finsweet:"@finsweet/attributes"}},dev:{key:`${b}-dev`}},[$,pe]=k(C);var q=()=>{let{currentScript:t}=document,{preventLoad:e,debugMode:o}=C,n=typeof(t==null?void 0:t.getAttribute(e.key))=="string";return typeof(t==null?void 0:t.getAttribute(o.key))=="string"&&l.activateAlerts(),{preventsLoad:n}};var W=()=>{if(window.fsAttributes&&!Array.isArray(window.fsAttributes))return;let t={cms:{},push(...e){var o,n;for(let[s,r]of e)(n=(o=this[s])==null?void 0:o.loading)==null||n.then(r)}};bt(t),gt(t),window.fsAttributes=t,window.FsAttributes=window.fsAttributes,K()},bt=t=>{let e=$("src","finsweet",{operator:"contains"}),o=$("dev"),s=[...document.querySelectorAll(`script${e}, script${o}`)].reduce((r,i)=>{var p;let c=i.getAttribute(C.dev.key)||((p=i.src.match(/[\w-. ]+(?=(\.js)$)/))==null?void 0:p[0]);return c&&!r.includes(c)&&r.push(c),r},[]);for(let r of s){t[r]={};let i=t[r];i.loading=new Promise(c=>{i.resolve=p=>{c(p),delete i.resolve}})}},gt=t=>{let e=Array.isArray(window.fsAttributes)?window.fsAttributes:[];t.push(...e)};var z="1.6.2";var g="cmsnest",R=`fs-${g}`,xt="list",Ct="collection",Et="empty",E={element:{key:`${R}-element`,values:{list:xt}},collection:{key:`${R}-${Ct}`},empty:{key:`${R}-${Et}`}},[u,Ae]=k(E);var{collection:{key:H},empty:{key:At}}=E,X=({createCMSListInstances:t})=>{let e=new Map,o=t([u("collection")]);for(let n of o){let s=S(n.getAttribute(H));if(!s)continue;let r=document.querySelector(`[${At}^="${s}"]`);r&&(r.style.display="none"),n.wrapper.style.display="none",e.set(s,{listInstance:n,emptyElement:r})}return e},G=t=>{let e=new Map,o=t.querySelectorAll(`${u("collection")}:not(a)`);for(let n of o){let s=S(n.getAttribute(H));!s||e.set(s,n)}return e};var ht=new DOMParser,Y=new Map,J=async t=>{try{let e=Y.get(t);if(e)return e;let o=new Promise(async n=>{let r=await(await fetch(t)).text(),i=ht.parseFromString(r,"text/html");n(i)});return Y.set(t,o),o}catch(e){return null}};var A=async({element:t,href:e},o,n)=>{if(!e)return;let{CMSList:s,CMSItem:r}=n,i=G(t);if(!i.size)return;let c=await J(e);if(!c)return;let p=P([u("collection")],c);await Promise.all(p.map(async(m,y)=>{let B=new s(m,y),N=S(B.getAttribute(E.collection.key));if(!N)return;let F=o.get(N),h=i.get(N);if(!F||!h)return;let D=h.parentElement;if(!D)return;let{listInstance:j,emptyElement:L}=F,_=B.items.reduce((a,{href:d})=>{if(!d)return a;let T=j.items.find(I=>I.href&&d===I.href);return T&&a.push(T),a},[]);if(!_.length&&!L)return;let f=M(j.wrapper),rt=w(f,"items");if(f.style.display="",_.length)for(let a of rt){if(!!!_.find(({element:I})=>I.isEqualNode(a))){a.remove();continue}let T=new r(a,f);await A(T,o,n)}else if(L){let a=w(f,"list");a==null||a.remove();let d=M(L);d.style.display="",f.appendChild(d)}D.insertBefore(f,h),h.remove()}))};var Q=(t,e,o)=>{t.on("shouldnest",async n=>{await Promise.all(n.map(s=>A(s,e,o)))})};var Z=async(t,e)=>{let o=X(e);if(!o.size){l.alert(`No collections to nest found for the list n\xBA ${t.index}`,"info");return}Q(t,o,e);let n=[...t.items];await Promise.all(n.map(s=>A(s,o,e))),await t.emitSerial("nestinitialitems",n)};var O=async()=>{var o,n;let t=await x();if(!t)return[];let e=t.createCMSListInstances([u("element","list",{operator:"prefixed"})]);return await Promise.all(e.map(s=>Z(s,t))),(n=(o=window.fsAttributes[g]).resolve)==null||n.call(o,e),e};W();x();var tt,et;(tt=window.fsAttributes)[et=g]||(tt[et]={});var{preventsLoad:Tt}=q(),ot=window.fsAttributes[g];ot.version=z;Tt?ot.init=O:(window.Webflow||(window.Webflow=[]),window.Webflow.push(O));})();
