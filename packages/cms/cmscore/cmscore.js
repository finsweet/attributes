var ue=Object.create;var P=Object.defineProperty,ce=Object.defineProperties,pe=Object.getOwnPropertyDescriptor,me=Object.getOwnPropertyDescriptors,fe=Object.getOwnPropertyNames,I=Object.getOwnPropertySymbols,de=Object.getPrototypeOf,O=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var J=(r,e,t)=>e in r?P(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,M=(r,e)=>{for(var t in e||(e={}))O.call(e,t)&&J(r,t,e[t]);if(I)for(var t of I(e))U.call(e,t)&&J(r,t,e[t]);return r},Q=(r,e)=>ce(r,me(e)),ge=r=>P(r,"__esModule",{value:!0});var X=(r,e)=>{var t={};for(var n in r)O.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&I)for(var n of I(r))e.indexOf(n)<0&&U.call(r,n)&&(t[n]=r[n]);return t};var be=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var ye=(r,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of fe(e))!O.call(r,n)&&n!=="default"&&P(r,n,{get:()=>e[n],enumerable:!(t=pe(e,n))||t.enumerable});return r},he=r=>ye(ge(P(r!=null?ue(de(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r);var c=(r,e,t)=>new Promise((n,i)=>{var o=a=>{try{l(t.next(a))}catch(m){i(m)}},s=a=>{try{l(t.throw(a))}catch(m){i(m)}},l=a=>a.done?n(a.value):Promise.resolve(a.value).then(o,s);l((t=t.apply(r,e)).next())});var ne=be((De,te)=>{"use strict";var g=new WeakMap,T=new WeakMap,x=new WeakMap,V=Symbol("anyProducer"),Y=Promise.resolve(),W=Symbol("listenerAdded"),v=Symbol("listenerRemoved"),k=!1;function E(r){if(typeof r!="string"&&typeof r!="symbol")throw new TypeError("eventName must be a string or a symbol")}function D(r){if(typeof r!="function")throw new TypeError("listener must be a function")}function w(r,e){let t=T.get(r);return t.has(e)||t.set(e,new Set),t.get(e)}function A(r,e){let t=typeof e=="string"||typeof e=="symbol"?e:V,n=x.get(r);return n.has(t)||n.set(t,new Set),n.get(t)}function Ee(r,e,t){let n=x.get(r);if(n.has(e))for(let i of n.get(e))i.enqueue(t);if(n.has(V)){let i=Promise.all([e,t]);for(let o of n.get(V))o.enqueue(i)}}function Z(r,e){e=Array.isArray(e)?e:[e];let t=!1,n=()=>{},i=[],o={enqueue(s){i.push(s),n()},finish(){t=!0,n()}};for(let s of e)A(r,s).add(o);return{next(){return c(this,null,function*(){return i?i.length===0?t?(i=void 0,this.next()):(yield new Promise(s=>{n=s}),this.next()):{done:!1,value:yield i.shift()}:{done:!0}})},return(l){return c(this,arguments,function*(s){i=void 0;for(let a of e)A(r,a).delete(o);return n(),arguments.length>0?{done:!0,value:yield s}:{done:!0}})},[Symbol.asyncIterator](){return this}}}function N(r){if(r===void 0)return ee;if(!Array.isArray(r))throw new TypeError("`methodNames` must be an array of strings");for(let e of r)if(!ee.includes(e))throw typeof e!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${e} is not Emittery method`);return r}var F=r=>r===W||r===v,b=class{static mixin(e,t){return t=N(t),n=>{if(typeof n!="function")throw new TypeError("`target` must be function");for(let s of t)if(n.prototype[s]!==void 0)throw new Error(`The property \`${s}\` already exists on \`target\``);function i(){return Object.defineProperty(this,e,{enumerable:!1,value:new b}),this[e]}Object.defineProperty(n.prototype,e,{enumerable:!1,get:i});let o=s=>function(...l){return this[e][s](...l)};for(let s of t)Object.defineProperty(n.prototype,s,{enumerable:!1,value:o(s)});return n}}static get isDebugEnabled(){if(typeof process!="object")return k;let{env:e}=process||{env:{}};return e.DEBUG==="emittery"||e.DEBUG==="*"||k}static set isDebugEnabled(e){k=e}constructor(e={}){g.set(this,new Set),T.set(this,new Map),x.set(this,new Map),this.debug=e.debug||{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(t,n,i,o)=>{o=JSON.stringify(o),typeof i=="symbol"&&(i=i.toString());let s=new Date,l=`${s.getHours()}:${s.getMinutes()}:${s.getSeconds()}.${s.getMilliseconds()}`;console.log(`[${l}][emittery:${t}][${n}] Event Name: ${i}
	data: ${o}`)})}logIfDebugEnabled(e,t,n){(b.isDebugEnabled||this.debug.enabled)&&this.debug.logger(e,this.debug.name,t,n)}on(e,t){D(t),e=Array.isArray(e)?e:[e];for(let n of e)E(n),w(this,n).add(t),this.logIfDebugEnabled("subscribe",n,void 0),F(n)||this.emit(W,{eventName:n,listener:t});return this.off.bind(this,e,t)}off(e,t){D(t),e=Array.isArray(e)?e:[e];for(let n of e)E(n),w(this,n).delete(t),this.logIfDebugEnabled("unsubscribe",n,void 0),F(n)||this.emit(v,{eventName:n,listener:t})}once(e){return new Promise(t=>{let n=this.on(e,i=>{n(),t(i)})})}events(e){e=Array.isArray(e)?e:[e];for(let t of e)E(t);return Z(this,e)}emit(e,t){return c(this,null,function*(){E(e),this.logIfDebugEnabled("emit",e,t),Ee(this,e,t);let n=w(this,e),i=g.get(this),o=[...n],s=F(e)?[]:[...i];yield Y,yield Promise.all([...o.map(l=>c(this,null,function*(){if(n.has(l))return l(t)})),...s.map(l=>c(this,null,function*(){if(i.has(l))return l(e,t)}))])})}emitSerial(e,t){return c(this,null,function*(){E(e),this.logIfDebugEnabled("emitSerial",e,t);let n=w(this,e),i=g.get(this),o=[...n],s=[...i];yield Y;for(let l of o)n.has(l)&&(yield l(t));for(let l of s)i.has(l)&&(yield l(e,t))})}onAny(e){return D(e),this.logIfDebugEnabled("subscribeAny",void 0,void 0),g.get(this).add(e),this.emit(W,{listener:e}),this.offAny.bind(this,e)}anyEvent(){return Z(this)}offAny(e){D(e),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),this.emit(v,{listener:e}),g.get(this).delete(e)}clearListeners(e){e=Array.isArray(e)?e:[e];for(let t of e)if(this.logIfDebugEnabled("clear",t,void 0),typeof t=="string"||typeof t=="symbol"){w(this,t).clear();let n=A(this,t);for(let i of n)i.finish();n.clear()}else{g.get(this).clear();for(let n of T.get(this).values())n.clear();for(let n of x.get(this).values()){for(let i of n)i.finish();n.clear()}}}listenerCount(e){e=Array.isArray(e)?e:[e];let t=0;for(let n of e){if(typeof n=="string"){t+=g.get(this).size+w(this,n).size+A(this,n).size+A(this).size;continue}typeof n!="undefined"&&E(n),t+=g.get(this).size;for(let i of T.get(this).values())t+=i.size;for(let i of x.get(this).values())t+=i.size}return t}bindMethods(e,t){if(typeof e!="object"||e===null)throw new TypeError("`target` must be an object");t=N(t);for(let n of t){if(e[n]!==void 0)throw new Error(`The property \`${n}\` already exists on \`target\``);Object.defineProperty(e,n,{enumerable:!1,value:this[n].bind(this)})}}},ee=Object.getOwnPropertyNames(b.prototype).filter(r=>r!=="constructor");Object.defineProperty(b,"listenerAdded",{value:W,writable:!1,enumerable:!0,configurable:!1});Object.defineProperty(b,"listenerRemoved",{value:v,writable:!1,enumerable:!0,configurable:!1});te.exports=b});var ie=he(ne());var L=class{constructor(e,t,n){this.element=e;this.list=t;this.currentIndex=n;this.props={};this.mustShow=!0;var i;this.href=(i=e.querySelector("a"))==null?void 0:i.href,this.ixResetted=typeof n=="number"}collectProps({fieldKey:e,typeKey:t,rangeKey:n}){let{element:i,props:o}=this,s=[...i.querySelectorAll(`[${e}]`)];for(let l of s){let a=l.getAttribute(e),m=t?l.getAttribute(t):void 0,d=n?l.getAttribute(n):void 0,{textContent:u}=l;if(!a||!u)continue;o[a]||(o[a]={type:m,range:d,values:new Set});let p=o[a],{values:y}=p;if(d==="from"||d==="to"){let h=[...y];h[d==="from"?0:1]=u,p.values=new Set(h)}y.add(u)}}};var S=class{static activateAlerts(){this.alertsActivated=!0}static alert(e,t){if(this.alertsActivated&&window.alert(e),t==="error")throw new Error(e)}};S.alertsActivated=!1;var C={wrapper:"w-dyn-list",list:"w-dyn-items",item:"w-dyn-item",paginationWrapper:"w-pagination-wrapper",paginationNext:"w-pagination-next",paginationPrevious:"w-pagination-previous",pageCount:"w-page-count",emptyState:"w-dyn-empty"};var _=r=>{let e=r.split("-"),t=parseInt(e[e.length-1]);if(!isNaN(t))return t};var B=r=>new Promise(e=>setTimeout(e,r));var q=r=>r!=null;var{wrapper:we,list:Se,paginationWrapper:Ce,paginationNext:xe,paginationPrevious:Ae,emptyState:Le,pageCount:Pe}=C;function f(r,e,t=document){let n=typeof r=="string"?t.querySelector(r):r;if(!n)return;let i=n.closest(`.${we}`);if(!i)return;let o=i.querySelector(`.${Se}`);return e==="wrapper"?i:e==="list"?o:e==="items"?[...(o==null?void 0:o.children)||[]]:e==="empty"?i.querySelector(`.${Le}`):e==="pageCount"?i.querySelector(`.${Pe}`):e==="pagination"?i.querySelector(`.${Ce}`):i.querySelector(`.${e==="next"?xe:Ae}`)}var R=(r,e=document)=>{r=r.filter(o=>o);let t=r.join(", ")||`.${C.wrapper}`;return[...e.querySelectorAll(t)].reduce((o,s)=>{if(!s)return o;let l=f(s,"wrapper");return!l||o.includes(l)||o.push(l),o},[])};var j=()=>c(void 0,null,function*(){var e;let{Webflow:r}=window;if(!(!r||!("destroy"in r)||!("ready"in r)||!("require"in r)))return r.destroy(),r.ready(),(e=r.require("ix2"))==null||e.init(),new Promise(t=>r.push(()=>t(void 0)))});var H=(r,e)=>{let t=r.getAttribute(e);return t?_(t):void 0};var re=(r,e=!1)=>c(void 0,null,function*(){let{items:t,itemsPerPage:n,currentPage:i,emptyState:o,resetIx:s}=r,l=[],a=[],m=0;for(let u of t){let{mustShow:p,currentIndex:y}=u;if(p){if(m+=1,!i){a.push(u);continue}m>(i-1)*n&&m<=i*n?a.push(u):typeof y=="number"&&l.push(u)}else typeof y=="number"&&l.push(u)}r.visibleItems=m,r.totalPages=Math.ceil(m/n);let d=[];if(a.forEach((u,p)=>{u.currentIndex!==p&&d.push([u,p,a[p-1]])}),e||(yield r.displayElement(o?"emptyElement":"list",!1)),yield Promise.all([...Ie(l,r,e),...Me(d,r,e)]),yield r.emitSerial("renderitems",a),s&&a.some(({ixResetted:u})=>!u)){for(let u of t)u.ixResetted=a.includes(u);yield j()}if(!e){let u=!m;r.emptyState=u,yield r.displayElement(u?"emptyElement":"list")}}),Ie=(r,{itemsAnimation:e},t)=>r.map(n=>c(void 0,null,function*(){let{element:i}=n;if(t&&e){let{animateOut:o,options:s}=e;yield o(i,M({remove:!0},s))}else i.remove();n.currentIndex=void 0})),Me=(r,{list:e,itemsAnimation:t},n)=>r.map((a,m)=>c(void 0,[a,m],function*([i,o,s],l){i.animating=new Promise(d=>c(void 0,null,function*(){i.rendering=new Promise(u=>c(void 0,null,function*(){yield s==null?void 0:s.rendering;let{element:p,currentIndex:y}=i,h=(s==null?void 0:s.element)||null;if(typeof y!="number"&&n&&t){let{prepareIn:oe,animateIn:se,options:le}=t,z=le||{},{stagger:K}=z,ae=X(z,["stagger"]),G=M({target:e,insertAfter:h},ae);oe(p,G),u(),K&&(yield B(K*l)),yield se(p,Q(M({},G),{prepared:!0}))}else h?e.insertBefore(p,h.nextSibling):e.prepend(p),u();d()}))})),yield i.rendering,i.currentIndex=o}));var $=class extends ie.default{constructor(e,t){super();this.wrapper=e;this.index=t;this.resetIx=!1;this.list=f(this.wrapper,"list"),this.paginationWrapper=f(this.wrapper,"pagination"),this.paginationNext=f(this.wrapper,"next"),this.paginationPrevious=f(this.wrapper,"previous"),this.paginationCount=f(this.wrapper,"pageCount");let n=f(this.wrapper,"items");this.visibleItems=this.itemsPerPage=n.length,this.totalPages=1,this.items=n.map((i,o)=>new L(i,this.list,o))}addItems(e){return c(this,null,function*(){let{items:t,list:n}=this,i=e.map(o=>new L(o,n));t.push(...i),yield this.emit("shouldnest",i),yield this.emit("shouldcollectprops",i),yield this.emit("shouldsort",i),yield this.emit("shouldfilter"),yield this.renderItems(!0),yield this.emit("additems",i)})}renderItems(e){return c(this,null,function*(){return yield this.renderingQueue,new Promise(t=>c(this,null,function*(){let n=re(this,e);this.renderingQueue=n,yield n,t()}))})}displayElement(e,t=!0,n=!0){return c(this,null,function*(){let{listAnimation:i}=this,o=this[e];if(!!o)if(i&&n){let{animateIn:s,animateOut:l,options:a}=i;yield(t?s:l)(o,a)}else o.style.display=t?"":"none"})}switchPage(e){return c(this,null,function*(){let{currentPage:t}=this;e!==t&&(yield this.emit("switchpage",e),this.currentPage=e,this.scrollToAnchor(),t&&(yield this.renderItems()))})}addEmptyElement(e){let{wrapper:t,list:n,emptyElement:i}=this;i||(e.style.display="none",t.insertBefore(e,n.nextSibling),this.emptyElement=e)}addPaginationPrevious(e){var i;let{paginationPrevious:t,paginationNext:n}=this;t||(e.style.display="none",(i=n==null?void 0:n.parentElement)==null||i.prepend(e),this.paginationPrevious=e)}addLoader(e){let{loader:t}=this;t||(e.style.display="none",this.loader=e)}scrollToAnchor(){var e;(e=this.scrollAnchor)==null||e.scrollIntoView({behavior:"smooth"})}getAttribute(e){let{wrapper:t,list:n}=this;return t.getAttribute(e)||n.getAttribute(e)}getInstanceIndex(e){let{wrapper:t,list:n}=this;return H(t,e)||H(n,e)}};var Te=r=>R(r).map(We).filter(q),We=r=>{var s,l;let e=f(r,"wrapper");if(!e){S.alert("The element is not a Collection List.","error");return}let{fsAttributes:t}=window;(s=t.cms).lists||(s.lists=[]),(l=t.cms).listElements||(l.listElements=[...document.querySelectorAll(`.${C.wrapper}`)]);let{lists:n,listElements:i}=t.cms,o=i.indexOf(e);if(o!==-1)return n[o]||(n[o]=new $(e,o)),n[o]};export{L as CMSItem,$ as CMSList,Te as createCMSListInstances};
