var G=Object.create;var w=Object.defineProperty;var U=Object.getOwnPropertyDescriptor;var J=Object.getOwnPropertyNames,k=Object.getOwnPropertySymbols,K=Object.getPrototypeOf,_=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var W=(o,e,t)=>e in o?w(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,M=(o,e)=>{for(var t in e||(e={}))_.call(e,t)&&W(o,t,e[t]);if(k)for(var t of k(e))X.call(e,t)&&W(o,t,e[t]);return o};var Q=o=>w(o,"__esModule",{value:!0});var Y=(o,e)=>()=>(e||o((e={exports:{}}).exports,e),e.exports);var Z=(o,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of J(e))!_.call(o,r)&&r!=="default"&&w(o,r,{get:()=>e[r],enumerable:!(t=U(e,r))||t.enumerable});return o},N=o=>Z(Q(w(o!=null?G(K(o)):{},"default",o&&o.__esModule&&"default"in o?{get:()=>o.default,enumerable:!0}:{value:o,enumerable:!0})),o);var c=(o,e,t)=>new Promise((r,i)=>{var s=a=>{try{l(t.next(a))}catch(u){i(u)}},n=a=>{try{l(t.throw(a))}catch(u){i(u)}},l=a=>a.done?r(a.value):Promise.resolve(a.value).then(s,n);l((t=t.apply(o,e)).next())});var H=Y((ue,q)=>{"use strict";var f=new WeakMap,x=new WeakMap,h=new WeakMap,P=Symbol("anyProducer"),B=Promise.resolve(),E=Symbol("listenerAdded"),C=Symbol("listenerRemoved"),T=!1;function d(o){if(typeof o!="string"&&typeof o!="symbol")throw new TypeError("eventName must be a string or a symbol")}function A(o){if(typeof o!="function")throw new TypeError("listener must be a function")}function b(o,e){let t=x.get(o);return t.has(e)||t.set(e,new Set),t.get(e)}function S(o,e){let t=typeof e=="string"||typeof e=="symbol"?e:P,r=h.get(o);return r.has(t)||r.set(t,new Set),r.get(t)}function ee(o,e,t){let r=h.get(o);if(r.has(e))for(let i of r.get(e))i.enqueue(t);if(r.has(P)){let i=Promise.all([e,t]);for(let s of r.get(P))s.enqueue(i)}}function F(o,e){e=Array.isArray(e)?e:[e];let t=!1,r=()=>{},i=[],s={enqueue(n){i.push(n),r()},finish(){t=!0,r()}};for(let n of e)S(o,n).add(s);return{next(){return c(this,null,function*(){return i?i.length===0?t?(i=void 0,this.next()):(yield new Promise(n=>{r=n}),this.next()):{done:!1,value:yield i.shift()}:{done:!0}})},return(l){return c(this,arguments,function*(n){i=void 0;for(let a of e)S(o,a).delete(s);return r(),arguments.length>0?{done:!0,value:yield n}:{done:!0}})},[Symbol.asyncIterator](){return this}}}function R(o){if(o===void 0)return j;if(!Array.isArray(o))throw new TypeError("`methodNames` must be an array of strings");for(let e of o)if(!j.includes(e))throw typeof e!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${e} is not Emittery method`);return o}var $=o=>o===E||o===C,p=class{static mixin(e,t){return t=R(t),r=>{if(typeof r!="function")throw new TypeError("`target` must be function");for(let n of t)if(r.prototype[n]!==void 0)throw new Error(`The property \`${n}\` already exists on \`target\``);function i(){return Object.defineProperty(this,e,{enumerable:!1,value:new p}),this[e]}Object.defineProperty(r.prototype,e,{enumerable:!1,get:i});let s=n=>function(...l){return this[e][n](...l)};for(let n of t)Object.defineProperty(r.prototype,n,{enumerable:!1,value:s(n)});return r}}static get isDebugEnabled(){if(typeof process!="object")return T;let{env:e}=process||{env:{}};return e.DEBUG==="emittery"||e.DEBUG==="*"||T}static set isDebugEnabled(e){T=e}constructor(e={}){f.set(this,new Set),x.set(this,new Map),h.set(this,new Map),this.debug=e.debug||{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(t,r,i,s)=>{s=JSON.stringify(s),typeof i=="symbol"&&(i=i.toString());let n=new Date,l=`${n.getHours()}:${n.getMinutes()}:${n.getSeconds()}.${n.getMilliseconds()}`;console.log(`[${l}][emittery:${t}][${r}] Event Name: ${i}
	data: ${s}`)})}logIfDebugEnabled(e,t,r){(p.isDebugEnabled||this.debug.enabled)&&this.debug.logger(e,this.debug.name,t,r)}on(e,t){A(t),e=Array.isArray(e)?e:[e];for(let r of e)d(r),b(this,r).add(t),this.logIfDebugEnabled("subscribe",r,void 0),$(r)||this.emit(E,{eventName:r,listener:t});return this.off.bind(this,e,t)}off(e,t){A(t),e=Array.isArray(e)?e:[e];for(let r of e)d(r),b(this,r).delete(t),this.logIfDebugEnabled("unsubscribe",r,void 0),$(r)||this.emit(C,{eventName:r,listener:t})}once(e){return new Promise(t=>{let r=this.on(e,i=>{r(),t(i)})})}events(e){e=Array.isArray(e)?e:[e];for(let t of e)d(t);return F(this,e)}emit(e,t){return c(this,null,function*(){d(e),this.logIfDebugEnabled("emit",e,t),ee(this,e,t);let r=b(this,e),i=f.get(this),s=[...r],n=$(e)?[]:[...i];yield B,yield Promise.all([...s.map(l=>c(this,null,function*(){if(r.has(l))return l(t)})),...n.map(l=>c(this,null,function*(){if(i.has(l))return l(e,t)}))])})}emitSerial(e,t){return c(this,null,function*(){d(e),this.logIfDebugEnabled("emitSerial",e,t);let r=b(this,e),i=f.get(this),s=[...r],n=[...i];yield B;for(let l of s)r.has(l)&&(yield l(t));for(let l of n)i.has(l)&&(yield l(e,t))})}onAny(e){return A(e),this.logIfDebugEnabled("subscribeAny",void 0,void 0),f.get(this).add(e),this.emit(E,{listener:e}),this.offAny.bind(this,e)}anyEvent(){return F(this)}offAny(e){A(e),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),this.emit(C,{listener:e}),f.get(this).delete(e)}clearListeners(e){e=Array.isArray(e)?e:[e];for(let t of e)if(this.logIfDebugEnabled("clear",t,void 0),typeof t=="string"||typeof t=="symbol"){b(this,t).clear();let r=S(this,t);for(let i of r)i.finish();r.clear()}else{f.get(this).clear();for(let r of x.get(this).values())r.clear();for(let r of h.get(this).values()){for(let i of r)i.finish();r.clear()}}}listenerCount(e){e=Array.isArray(e)?e:[e];let t=0;for(let r of e){if(typeof r=="string"){t+=f.get(this).size+b(this,r).size+S(this,r).size+S(this).size;continue}typeof r!="undefined"&&d(r),t+=f.get(this).size;for(let i of x.get(this).values())t+=i.size;for(let i of h.get(this).values())t+=i.size}return t}bindMethods(e,t){if(typeof e!="object"||e===null)throw new TypeError("`target` must be an object");t=R(t);for(let r of t){if(e[r]!==void 0)throw new Error(`The property \`${r}\` already exists on \`target\``);Object.defineProperty(e,r,{enumerable:!1,value:this[r].bind(this)})}}},j=Object.getOwnPropertyNames(p.prototype).filter(o=>o!=="constructor");Object.defineProperty(p,"listenerAdded",{value:E,writable:!1,enumerable:!0,configurable:!1});Object.defineProperty(p,"listenerRemoved",{value:C,writable:!1,enumerable:!0,configurable:!1});q.exports=p});var z=N(H());var g=class{static activateAlerts(){this.alertsActivated=!0}static alert(e,t){if(this.alertsActivated&&window.alert(e),t==="error")throw new Error(e)}};g.alertsActivated=!1;var I={wrapper:"w-dyn-list",list:"w-dyn-items",item:"w-dyn-item",paginationNext:"w-pagination-next",paginationPrevious:"w-pagination-previous",emptyState:"w-dyn-empty"};var v=o=>{let e=o.split("-"),t=parseInt(e[e.length-1]);if(!isNaN(t))return t};var D=o=>!!(o.offsetWidth||o.offsetHeight||o.getClientRects().length);var{wrapper:te,list:re,paginationNext:oe,paginationPrevious:ie,emptyState:ne}=I;function m(o,e,t=document){let r=typeof o=="string"?t.querySelector(o):o;if(!r)return;let i=r.closest(`.${te}`);if(!i)return;let s=i.querySelector(`.${re}`);return e==="wrapper"?i:e==="list"?s:e==="items"?[...(s==null?void 0:s.children)||[]]:e==="empty"?i.querySelector(`.${ne}`):i.querySelector(`.${e==="next"?oe:ie}`)}var O=(o,e)=>{let t=o.getAttribute(e);return t?v(t):void 0};var y=class{constructor(e,t){this.element=e;this.list=t;this.props={};this.isShowing=!1;this.isHiding=!1;var r;this.visible=D(e),this.href=(r=e.querySelector("a"))==null?void 0:r.href}};var L=class extends z.default{constructor(e,{pageIndex:t}={}){super();this.wrapper=e;this.showNewItems=!0;this.pageIndex=t,this.list=m(this.wrapper,"list"),this.paginationNext=m(this.wrapper,"next"),this.paginationPrevious=m(this.wrapper,"previous");let r=m(this.wrapper,"items");this.itemsPerPage=r.length,this.items=r.map(i=>new y(i,this.list))}renderItems(e,t=!0,r=!0){return c(this,null,function*(){let{itemsAnimation:i,list:s}=this;if(Array.isArray(e)||(e=[e]),!e.length)return;let n=e.map(({element:l})=>l);for(let l of e)l[t?"isShowing":"isHiding"]=!0;if(r&&i){let{animateIn:l,animateOut:a,options:u}=i;t?yield l(n,M({target:s},u)):yield a(n,M({remove:!0},u))}else for(let l of n)t?s.appendChild(l):l.remove();for(let l of e)l[t?"isShowing":"isHiding"]=!1,l.visible=t})}displayList(e=!0,t=!0){return c(this,null,function*(){let{wrapper:r,listAnimation:i}=this;if(t&&i){let{animateIn:s,animateOut:n,options:l}=i;yield(e?s:n)(r,l)}else r.style.display=e?"":"none"})}getAttribute(e){let{wrapper:t,list:r}=this;return t.getAttribute(e)||r.getAttribute(e)}getInstanceIndex(e){let{wrapper:t,list:r}=this;return O(t,e)||O(r,e)}};var se=o=>{var n,l;let e=m(o,"wrapper");if(!e){g.alert("The element is not a Collection List.","error");return}let{fsAttributes:t}=window;(n=t.cms).lists||(n.lists=[]),(l=t.cms).listElements||(l.listElements=[...document.querySelectorAll(`.${I.wrapper}`)]);let{lists:r,listElements:i}=t.cms,s=i.indexOf(e);if(s!==-1)return r[s]||(r[s]=new L(e,{pageIndex:s})),r[s]};var le=(o,e)=>c(void 0,null,function*(){let{items:t,list:r,showNewItems:i}=o,s=e.map(n=>new y(n,r));t.push(...s),yield o.emitSerial("beforeadditems",s),i&&(yield o.renderItems(s)),yield o.emitSerial("afteradditems",s)}),ae=(o,e,t)=>{for(let r of o){let s=[...r.element.querySelectorAll(`[${e}]`)].reduce((n,l)=>{let a=l.getAttribute(e),u=t?l.getAttribute(t):void 0,{textContent:V}=l;return!a||!V||(n[a]||(n[a]={values:[],type:u}),n[a].values.push(V)),n},{});r.props=s}};export{y as CMSItem,L as CMSList,le as addItemsToList,ae as collectItemsProps,se as createCMSListInstance};
