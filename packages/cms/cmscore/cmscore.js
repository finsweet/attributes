var pe=Object.create;var T=Object.defineProperty,me=Object.defineProperties,fe=Object.getOwnPropertyDescriptor,de=Object.getOwnPropertyDescriptors,ge=Object.getOwnPropertyNames,W=Object.getOwnPropertySymbols,be=Object.getPrototypeOf,_=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var Z=(r,e,t)=>e in r?T(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,v=(r,e)=>{for(var t in e||(e={}))_.call(e,t)&&Z(r,t,e[t]);if(W)for(var t of W(e))Y.call(e,t)&&Z(r,t,e[t]);return r},N=(r,e)=>me(r,de(e)),ye=r=>T(r,"__esModule",{value:!0});var ee=(r,e)=>{var t={};for(var n in r)_.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&W)for(var n of W(r))e.indexOf(n)<0&&Y.call(r,n)&&(t[n]=r[n]);return t};var he=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var we=(r,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of ge(e))!_.call(r,n)&&n!=="default"&&T(r,n,{get:()=>e[n],enumerable:!(t=fe(e,n))||t.enumerable});return r},Ee=r=>we(ye(T(r!=null?pe(be(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r);var u=(r,e,t)=>new Promise((n,o)=>{var i=a=>{try{l(t.next(a))}catch(g){o(g)}},s=a=>{try{l(t.throw(a))}catch(g){o(g)}},l=a=>a.done?n(a.value):Promise.resolve(a.value).then(i,s);l((t=t.apply(r,e)).next())});var se=he((Oe,ie)=>{"use strict";var y=new WeakMap,D=new WeakMap,L=new WeakMap,F=Symbol("anyProducer"),te=Promise.resolve(),$=Symbol("listenerAdded"),O=Symbol("listenerRemoved"),B=!1;function S(r){if(typeof r!="string"&&typeof r!="symbol")throw new TypeError("eventName must be a string or a symbol")}function V(r){if(typeof r!="function")throw new TypeError("listener must be a function")}function C(r,e){let t=D.get(r);return t.has(e)||t.set(e,new Set),t.get(e)}function I(r,e){let t=typeof e=="string"||typeof e=="symbol"?e:F,n=L.get(r);return n.has(t)||n.set(t,new Set),n.get(t)}function Se(r,e,t){let n=L.get(r);if(n.has(e))for(let o of n.get(e))o.enqueue(t);if(n.has(F)){let o=Promise.all([e,t]);for(let i of n.get(F))i.enqueue(o)}}function ne(r,e){e=Array.isArray(e)?e:[e];let t=!1,n=()=>{},o=[],i={enqueue(s){o.push(s),n()},finish(){t=!0,n()}};for(let s of e)I(r,s).add(i);return{next(){return u(this,null,function*(){return o?o.length===0?t?(o=void 0,this.next()):(yield new Promise(s=>{n=s}),this.next()):{done:!1,value:yield o.shift()}:{done:!0}})},return(l){return u(this,arguments,function*(s){o=void 0;for(let a of e)I(r,a).delete(i);return n(),arguments.length>0?{done:!0,value:yield s}:{done:!0}})},[Symbol.asyncIterator](){return this}}}function re(r){if(r===void 0)return oe;if(!Array.isArray(r))throw new TypeError("`methodNames` must be an array of strings");for(let e of r)if(!oe.includes(e))throw typeof e!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${e} is not Emittery method`);return r}var q=r=>r===$||r===O,h=class{static mixin(e,t){return t=re(t),n=>{if(typeof n!="function")throw new TypeError("`target` must be function");for(let s of t)if(n.prototype[s]!==void 0)throw new Error(`The property \`${s}\` already exists on \`target\``);function o(){return Object.defineProperty(this,e,{enumerable:!1,value:new h}),this[e]}Object.defineProperty(n.prototype,e,{enumerable:!1,get:o});let i=s=>function(...l){return this[e][s](...l)};for(let s of t)Object.defineProperty(n.prototype,s,{enumerable:!1,value:i(s)});return n}}static get isDebugEnabled(){if(typeof process!="object")return B;let{env:e}=process||{env:{}};return e.DEBUG==="emittery"||e.DEBUG==="*"||B}static set isDebugEnabled(e){B=e}constructor(e={}){y.set(this,new Set),D.set(this,new Map),L.set(this,new Map),this.debug=e.debug||{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(t,n,o,i)=>{i=JSON.stringify(i),typeof o=="symbol"&&(o=o.toString());let s=new Date,l=`${s.getHours()}:${s.getMinutes()}:${s.getSeconds()}.${s.getMilliseconds()}`;console.log(`[${l}][emittery:${t}][${n}] Event Name: ${o}
	data: ${i}`)})}logIfDebugEnabled(e,t,n){(h.isDebugEnabled||this.debug.enabled)&&this.debug.logger(e,this.debug.name,t,n)}on(e,t){V(t),e=Array.isArray(e)?e:[e];for(let n of e)S(n),C(this,n).add(t),this.logIfDebugEnabled("subscribe",n,void 0),q(n)||this.emit($,{eventName:n,listener:t});return this.off.bind(this,e,t)}off(e,t){V(t),e=Array.isArray(e)?e:[e];for(let n of e)S(n),C(this,n).delete(t),this.logIfDebugEnabled("unsubscribe",n,void 0),q(n)||this.emit(O,{eventName:n,listener:t})}once(e){return new Promise(t=>{let n=this.on(e,o=>{n(),t(o)})})}events(e){e=Array.isArray(e)?e:[e];for(let t of e)S(t);return ne(this,e)}emit(e,t){return u(this,null,function*(){S(e),this.logIfDebugEnabled("emit",e,t),Se(this,e,t);let n=C(this,e),o=y.get(this),i=[...n],s=q(e)?[]:[...o];yield te,yield Promise.all([...i.map(l=>u(this,null,function*(){if(n.has(l))return l(t)})),...s.map(l=>u(this,null,function*(){if(o.has(l))return l(e,t)}))])})}emitSerial(e,t){return u(this,null,function*(){S(e),this.logIfDebugEnabled("emitSerial",e,t);let n=C(this,e),o=y.get(this),i=[...n],s=[...o];yield te;for(let l of i)n.has(l)&&(yield l(t));for(let l of s)o.has(l)&&(yield l(e,t))})}onAny(e){return V(e),this.logIfDebugEnabled("subscribeAny",void 0,void 0),y.get(this).add(e),this.emit($,{listener:e}),this.offAny.bind(this,e)}anyEvent(){return ne(this)}offAny(e){V(e),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),this.emit(O,{listener:e}),y.get(this).delete(e)}clearListeners(e){e=Array.isArray(e)?e:[e];for(let t of e)if(this.logIfDebugEnabled("clear",t,void 0),typeof t=="string"||typeof t=="symbol"){C(this,t).clear();let n=I(this,t);for(let o of n)o.finish();n.clear()}else{y.get(this).clear();for(let n of D.get(this).values())n.clear();for(let n of L.get(this).values()){for(let o of n)o.finish();n.clear()}}}listenerCount(e){e=Array.isArray(e)?e:[e];let t=0;for(let n of e){if(typeof n=="string"){t+=y.get(this).size+C(this,n).size+I(this,n).size+I(this).size;continue}typeof n!="undefined"&&S(n),t+=y.get(this).size;for(let o of D.get(this).values())t+=o.size;for(let o of L.get(this).values())t+=o.size}return t}bindMethods(e,t){if(typeof e!="object"||e===null)throw new TypeError("`target` must be an object");t=re(t);for(let n of t){if(e[n]!==void 0)throw new Error(`The property \`${n}\` already exists on \`target\``);Object.defineProperty(e,n,{enumerable:!1,value:this[n].bind(this)})}}},oe=Object.getOwnPropertyNames(h.prototype).filter(r=>r!=="constructor");Object.defineProperty(h,"listenerAdded",{value:$,writable:!1,enumerable:!0,configurable:!1});Object.defineProperty(h,"listenerRemoved",{value:O,writable:!1,enumerable:!0,configurable:!1});ie.exports=h});var ue=Ee(se());var P=class{constructor(e,t,n){this.element=e;this.list=t;this.currentIndex=n;this.props={};this.valid=!0;var i;this.href=(i=e.querySelector("a"))==null?void 0:i.href;let o=typeof n=="number";this.needsIx2Restart=this.needsCommerceRestart=!o}collectProps({fieldKey:e,typeKey:t,rangeKey:n}){let{element:o,props:i}=this,s=[...o.querySelectorAll(`[${e}]`)];for(let l of s){let a=l.getAttribute(e),g=t?l.getAttribute(t):void 0,p=n?l.getAttribute(n):void 0,{textContent:m,innerHTML:b}=l;if(!a||!m)continue;i[a]||(i[a]={type:g,range:p,values:new Set,elements:new Map});let w=i[a],{values:c,elements:d}=w;if(p==="from"||p==="to"){let E=[...c];E[p==="from"?0:1]=m,w.values=new Set(E)}c.add(m),d.has(m)||d.set(m,{element:l,originalHTML:b})}}};var x=class{static activateAlerts(){this.alertsActivated=!0}static alert(e,t){if(this.alertsActivated&&window.alert(e),t==="error")throw new Error(e)}};x.alertsActivated=!1;var A={wrapper:"w-dyn-list",list:"w-dyn-items",item:"w-dyn-item",paginationWrapper:"w-pagination-wrapper",paginationNext:"w-pagination-next",paginationPrevious:"w-pagination-previous",pageCount:"w-page-count",emptyState:"w-dyn-empty"};var R=r=>{let e=r.split("-"),t=parseInt(e[e.length-1]);if(!isNaN(t))return t};var H=r=>new Promise(e=>setTimeout(e,r));var j=r=>r!=null;var{wrapper:Ce,list:xe,paginationWrapper:Ae,paginationNext:Le,paginationPrevious:Ie,emptyState:Pe,pageCount:Me}=A;function f(r,e,t=document){let n=typeof r=="string"?t.querySelector(r):r;if(!n)return;let o=n.closest(`.${Ce}`);if(!o)return;let i=o.querySelector(`.${xe}`);return e==="wrapper"?o:e==="list"?i:e==="items"?[...(i==null?void 0:i.children)||[]]:e==="empty"?o.querySelector(`.${Pe}`):e==="pageCount"?o.querySelector(`.${Me}`):e==="pagination"?o.querySelector(`.${Ae}`):o.querySelector(`.${e==="next"?Le:Ie}`)}var z=(r,e=document)=>{r=r.filter(i=>i);let t=r.join(", ")||`.${A.wrapper}`;return[...e.querySelectorAll(t)].reduce((i,s)=>{if(!s)return i;let l=f(s,"wrapper");return!l||i.includes(l)||i.push(l),i},[])};var K=()=>document.documentElement.getAttribute("data-wf-site");var G=r=>u(void 0,null,function*(){let{Webflow:e}=window;if(!(!e||!("destroy"in e)||!("ready"in e)||!("require"in e))&&!(r&&!r.length)){if(r||(e.destroy(),e.ready()),!r||r.includes("ix2")){let t=e.require("ix2");t&&(t.destroy(),t.init())}if(!r||r.includes("commerce")){let t=e.require("commerce"),n=K();t&&n&&(t.destroy(),t.init({siteId:n,apiUrl:"https://render.webflow.com"}))}return new Promise(t=>e.push(()=>t(void 0)))}});var U=(r,e)=>{let t=r.getAttribute(e);return t?R(t):void 0};var le=(r,e,t,n)=>u(void 0,null,function*(){if(!t&&!n)return;let o=[];if(t&&e.some(({needsIx2Restart:i})=>i)&&o.push("ix2"),n&&e.some(({needsCommerceRestart:i})=>i)&&o.push("commerce"),o.length)for(let i of r){let s=e.includes(i);t&&(i.needsIx2Restart=!s),n&&(i.needsCommerceRestart=!s)}yield G(o)});var ae=(r,e=!1)=>u(void 0,null,function*(){let{items:t,itemsPerPage:n,currentPage:o,restartIx:i,restartCommerce:s,emptyState:l}=r,a=[],g=[],p=[];for(let c of t){let{valid:d,currentIndex:E}=c,M=typeof E=="number";if(d){if(a.push(c),!o){p.push(c);continue}a.length>(o-1)*n&&a.length<=o*n?p.push(c):M&&g.push(c)}else M&&g.push(c)}r.validItems=a,r.totalPages=Math.ceil(a.length/n)||1;let m=!a.length;r.emptyState=m;let b=[];p.forEach((c,d)=>{c.currentIndex!==d&&b.push([c,d,p[d-1]])});let w=!e||l&&!m;w&&(yield r.displayElement(l?"emptyElement":"list",!1)),yield Promise.all([...Te(g,r,e),...We(b,r,e)]),yield r.emitSerial("renderitems",p),(i||s)&&(yield le(t,p,i,s)),w&&(yield r.displayElement(m?"emptyElement":"list"))}),Te=(r,{itemsAnimation:e},t)=>r.map(n=>u(void 0,null,function*(){let{element:o}=n;if(t&&e){let{animateOut:i,options:s}=e;yield i(o,v({remove:!0},s))}else o.remove();n.currentIndex=void 0})),We=(r,{list:e,itemsAnimation:t},n)=>r.map((a,g)=>u(void 0,[a,g],function*([o,i,s],l){o.animating=new Promise(p=>u(void 0,null,function*(){o.rendering=new Promise(m=>u(void 0,null,function*(){yield s==null?void 0:s.rendering;let{element:b,currentIndex:w}=o,c=(s==null?void 0:s.element)||null;if(typeof w!="number"&&n&&t){let{prepareIn:E,animateIn:M,options:J}=t,d=J||{},{stagger:Q}=d,ce=ee(d,["stagger"]),X=v({target:e,insertAfter:c},ce);E(b,X),m(),Q&&(yield H(Q*l)),yield M(b,N(v({},X),{prepared:!0}))}else c?e.insertBefore(b,c.nextSibling):e.prepend(b),m();p()}))})),yield o.rendering,o.currentIndex=i}));var k=class extends ue.default{constructor(e,t){super();this.wrapper=e;this.index=t;this.restartIx=!1;this.restartCommerce=!1;this.list=f(this.wrapper,"list"),this.paginationWrapper=f(this.wrapper,"pagination"),this.paginationNext=f(this.wrapper,"next"),this.paginationPrevious=f(this.wrapper,"previous"),this.paginationCount=f(this.wrapper,"pageCount");let n=f(this.wrapper,"items");this.itemsPerPage=n.length,this.totalPages=1,this.items=this.validItems=n.map((o,i)=>new P(o,this.list,i))}addItems(e){return u(this,null,function*(){let{items:t,list:n}=this,o=e.map(i=>new P(i,n));t.push(...o),this.updateItemsCount(),yield this.emit("shouldnest",o),yield this.emit("shouldcollectprops",o),yield this.emit("shouldsort",o),yield this.emit("shouldfilter"),yield this.renderItems(!0),yield this.emit("additems",o)})}renderItems(e){return u(this,null,function*(){return yield this.renderingQueue,new Promise(t=>u(this,null,function*(){let n=ae(this,e);this.renderingQueue=n,yield n,t()}))})}displayElement(e,t=!0,n=!0){return u(this,null,function*(){let{listAnimation:o}=this,i=this[e];if(!!i)if(o&&n){let{animateIn:s,animateOut:l,options:a}=o;yield(t?s:l)(i,a)}else i.style.display=t?"":"none"})}switchPage(e,t=!0){return u(this,null,function*(){let{currentPage:n}=this;e!==n&&(yield this.emit("switchpage",e),this.currentPage=e,t&&this.scrollToAnchor(),n&&(yield this.renderItems()))})}addEmptyElement(e){let{wrapper:t,list:n,emptyElement:o}=this;o||(e.style.display="none",t.insertBefore(e,n.nextSibling),this.emptyElement=e)}addPaginationPrevious(e){var o;let{paginationPrevious:t,paginationNext:n}=this;t||(e.style.display="none",(o=n==null?void 0:n.parentElement)==null||o.prepend(e),this.paginationPrevious=e)}addLoader(e){let{loader:t}=this;t||(e.style.display="none",this.loader=e)}addItemsCount(e){let{itemsCount:t}=this;t||(this.itemsCount=e,this.updateItemsCount())}updateItemsCount(){let{itemsCount:e,items:t}=this;e&&(e.textContent=`${t.length}`)}scrollToAnchor(){let{scrollAnchor:e}=this;!e||window.setTimeout(()=>e.scrollIntoView({behavior:"smooth"}),100)}getAttribute(e){let{wrapper:t,list:n}=this;return t.getAttribute(e)||n.getAttribute(e)}getInstanceIndex(e){let{wrapper:t,list:n}=this;return U(t,e)||U(n,e)}};var ve=r=>z(r).map(De).filter(j),De=r=>{var s,l;let e=f(r,"wrapper");if(!e){x.alert("The element is not a Collection List.","error");return}let{fsAttributes:t}=window;(s=t.cms).lists||(s.lists=[]),(l=t.cms).listElements||(l.listElements=[...document.querySelectorAll(`.${A.wrapper}`)]);let{lists:n,listElements:o}=t.cms,i=o.indexOf(e);if(i!==-1)return n[i]||(n[i]=new k(e,i)),n[i]};export{P as CMSItem,k as CMSList,ve as createCMSListInstances};
