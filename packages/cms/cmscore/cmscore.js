var we=Object.create;var T=Object.defineProperty,Ee=Object.defineProperties,Se=Object.getOwnPropertyDescriptor,Ce=Object.getOwnPropertyDescriptors,xe=Object.getOwnPropertyNames,v=Object.getOwnPropertySymbols,Pe=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var N=(n,e,t)=>e in n?T(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,D=(n,e)=>{for(var t in e||(e={}))j.call(e,t)&&N(n,t,e[t]);if(v)for(var t of v(e))Z.call(e,t)&&N(n,t,e[t]);return n},ee=(n,e)=>Ee(n,Ce(e)),Le=n=>T(n,"__esModule",{value:!0});var te=(n,e)=>{var t={};for(var r in n)j.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&v)for(var r of v(n))e.indexOf(r)<0&&Z.call(n,r)&&(t[r]=n[r]);return t};var Me=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var Ie=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of xe(e))!j.call(n,i)&&(t||i!=="default")&&T(n,i,{get:()=>e[i],enumerable:!(r=Se(e,i))||r.enumerable});return n},Ae=(n,e)=>Ie(Le(T(n!=null?we(Pe(n)):{},"default",!e&&n&&n.__esModule?{get:()=>n.default,enumerable:!0}:{value:n,enumerable:!0})),n);var c=(n,e,t)=>new Promise((r,i)=>{var o=a=>{try{l(t.next(a))}catch(m){i(m)}},s=a=>{try{l(t.throw(a))}catch(m){i(m)}},l=a=>a.done?r(a.value):Promise.resolve(a.value).then(o,s);l((t=t.apply(n,e)).next())});var le=Me((Ct,se)=>{"use strict";var y=new WeakMap,_=new WeakMap,M=new WeakMap,V=Symbol("anyProducer"),ne=Promise.resolve(),q=Symbol("listenerAdded"),B=Symbol("listenerRemoved"),z=!1;function C(n){if(typeof n!="string"&&typeof n!="symbol")throw new TypeError("eventName must be a string or a symbol")}function $(n){if(typeof n!="function")throw new TypeError("listener must be a function")}function x(n,e){let t=_.get(n);return t.has(e)||t.set(e,new Set),t.get(e)}function I(n,e){let t=typeof e=="string"||typeof e=="symbol"?e:V,r=M.get(n);return r.has(t)||r.set(t,new Set),r.get(t)}function ke(n,e,t){let r=M.get(n);if(r.has(e))for(let i of r.get(e))i.enqueue(t);if(r.has(V)){let i=Promise.all([e,t]);for(let o of r.get(V))o.enqueue(i)}}function re(n,e){e=Array.isArray(e)?e:[e];let t=!1,r=()=>{},i=[],o={enqueue(s){i.push(s),r()},finish(){t=!0,r()}};for(let s of e)I(n,s).add(o);return{next(){return c(this,null,function*(){return i?i.length===0?t?(i=void 0,this.next()):(yield new Promise(s=>{r=s}),this.next()):{done:!1,value:yield i.shift()}:{done:!0}})},return(l){return c(this,arguments,function*(s){i=void 0;for(let a of e)I(n,a).delete(o);return r(),arguments.length>0?{done:!0,value:yield s}:{done:!0}})},[Symbol.asyncIterator](){return this}}}function ie(n){if(n===void 0)return oe;if(!Array.isArray(n))throw new TypeError("`methodNames` must be an array of strings");for(let e of n)if(!oe.includes(e))throw typeof e!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${e} is not Emittery method`);return n}var U=n=>n===q||n===B,w=class{static mixin(e,t){return t=ie(t),r=>{if(typeof r!="function")throw new TypeError("`target` must be function");for(let s of t)if(r.prototype[s]!==void 0)throw new Error(`The property \`${s}\` already exists on \`target\``);function i(){return Object.defineProperty(this,e,{enumerable:!1,value:new w}),this[e]}Object.defineProperty(r.prototype,e,{enumerable:!1,get:i});let o=s=>function(...l){return this[e][s](...l)};for(let s of t)Object.defineProperty(r.prototype,s,{enumerable:!1,value:o(s)});return r}}static get isDebugEnabled(){if(typeof process!="object")return z;let{env:e}=process||{env:{}};return e.DEBUG==="emittery"||e.DEBUG==="*"||z}static set isDebugEnabled(e){z=e}constructor(e={}){y.set(this,new Set),_.set(this,new Map),M.set(this,new Map),this.debug=e.debug||{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(t,r,i,o)=>{o=JSON.stringify(o),typeof i=="symbol"&&(i=i.toString());let s=new Date,l=`${s.getHours()}:${s.getMinutes()}:${s.getSeconds()}.${s.getMilliseconds()}`;console.log(`[${l}][emittery:${t}][${r}] Event Name: ${i}
	data: ${o}`)})}logIfDebugEnabled(e,t,r){(w.isDebugEnabled||this.debug.enabled)&&this.debug.logger(e,this.debug.name,t,r)}on(e,t){$(t),e=Array.isArray(e)?e:[e];for(let r of e)C(r),x(this,r).add(t),this.logIfDebugEnabled("subscribe",r,void 0),U(r)||this.emit(q,{eventName:r,listener:t});return this.off.bind(this,e,t)}off(e,t){$(t),e=Array.isArray(e)?e:[e];for(let r of e)C(r),x(this,r).delete(t),this.logIfDebugEnabled("unsubscribe",r,void 0),U(r)||this.emit(B,{eventName:r,listener:t})}once(e){return new Promise(t=>{let r=this.on(e,i=>{r(),t(i)})})}events(e){e=Array.isArray(e)?e:[e];for(let t of e)C(t);return re(this,e)}emit(e,t){return c(this,null,function*(){C(e),this.logIfDebugEnabled("emit",e,t),ke(this,e,t);let r=x(this,e),i=y.get(this),o=[...r],s=U(e)?[]:[...i];yield ne,yield Promise.all([...o.map(l=>c(this,null,function*(){if(r.has(l))return l(t)})),...s.map(l=>c(this,null,function*(){if(i.has(l))return l(e,t)}))])})}emitSerial(e,t){return c(this,null,function*(){C(e),this.logIfDebugEnabled("emitSerial",e,t);let r=x(this,e),i=y.get(this),o=[...r],s=[...i];yield ne;for(let l of o)r.has(l)&&(yield l(t));for(let l of s)i.has(l)&&(yield l(e,t))})}onAny(e){return $(e),this.logIfDebugEnabled("subscribeAny",void 0,void 0),y.get(this).add(e),this.emit(q,{listener:e}),this.offAny.bind(this,e)}anyEvent(){return re(this)}offAny(e){$(e),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),this.emit(B,{listener:e}),y.get(this).delete(e)}clearListeners(e){e=Array.isArray(e)?e:[e];for(let t of e)if(this.logIfDebugEnabled("clear",t,void 0),typeof t=="string"||typeof t=="symbol"){x(this,t).clear();let r=I(this,t);for(let i of r)i.finish();r.clear()}else{y.get(this).clear();for(let r of _.get(this).values())r.clear();for(let r of M.get(this).values()){for(let i of r)i.finish();r.clear()}}}listenerCount(e){e=Array.isArray(e)?e:[e];let t=0;for(let r of e){if(typeof r=="string"){t+=y.get(this).size+x(this,r).size+I(this,r).size+I(this).size;continue}typeof r!="undefined"&&C(r),t+=y.get(this).size;for(let i of _.get(this).values())t+=i.size;for(let i of M.get(this).values())t+=i.size}return t}bindMethods(e,t){if(typeof e!="object"||e===null)throw new TypeError("`target` must be an object");t=ie(t);for(let r of t){if(e[r]!==void 0)throw new Error(`The property \`${r}\` already exists on \`target\``);Object.defineProperty(e,r,{enumerable:!1,value:this[r].bind(this)})}}},oe=Object.getOwnPropertyNames(w.prototype).filter(n=>n!=="constructor");Object.defineProperty(w,"listenerAdded",{value:q,writable:!1,enumerable:!0,configurable:!1});Object.defineProperty(w,"listenerRemoved",{value:B,writable:!1,enumerable:!0,configurable:!1});se.exports=w});var Te="1.5.5";var P=class{static activateAlerts(){this.alertsActivated=!0}static alert(e,t){if(this.alertsActivated&&window.alert(e),t==="error")throw new Error(e)}};P.alertsActivated=!1;var S={wrapper:"w-dyn-list",list:"w-dyn-items",item:"w-dyn-item",paginationWrapper:"w-pagination-wrapper",paginationNext:"w-pagination-next",paginationPrevious:"w-pagination-previous",pageCount:"w-page-count",emptyState:"w-dyn-empty"};var H=n=>{let e=n.split("-"),t=parseInt(e[e.length-1]);if(!isNaN(t))return t};var R=n=>new Promise(e=>setTimeout(e,n));var F=n=>n!=null;var{wrapper:ve,list:De,paginationWrapper:Oe,paginationNext:_e,paginationPrevious:qe,emptyState:Be,pageCount:$e}=S;function d(n,e,t=document){let r=typeof n=="string"?t.querySelector(n):n;if(!r)return;let i=r.closest(`.${ve}`);if(!i)return;let o=i.querySelector(`.${De}`);return e==="wrapper"?i:e==="list"?o:e==="items"?[...(o==null?void 0:o.children)||[]]:e==="pageCount"?i.querySelector(`.${$e}`):e==="empty"?i.querySelector(`:scope > .${Be}`):e==="pagination"?i.querySelector(`.${Oe}`):i.querySelector(`.${e==="next"?_e:qe}`)}var L=(n,e=document)=>{n=n.filter(o=>o);let t=n.join(", ")||`.${S.wrapper}`;return[...e.querySelectorAll(t)].reduce((o,s)=>{if(!s)return o;let l=d(s,"wrapper");return!l||o.includes(l)||o.push(l),o},[])};var Q=()=>document.documentElement.getAttribute("data-wf-site");var O=n=>c(void 0,null,function*(){var t,r,i;let{Webflow:e}=window;if(!(!e||!("destroy"in e)||!("ready"in e)||!("require"in e))&&!(n&&!n.length)){if(n||(e.destroy(),e.ready()),!n||n.includes("ix2")){let o=e.require("ix2");if(o){let{store:s,actions:l}=o,{eventState:a}=s.getState().ixSession;n||o.destroy(),o.init();for(let m of Object.entries(a))s.dispatch(l.eventStateChanged(...m))}}if(!n||n.includes("commerce")){let o=e.require("commerce"),s=Q();o&&s&&(o.destroy(),o.init({siteId:s,apiUrl:"https://render.webflow.com"}))}return(n==null?void 0:n.includes("lightbox"))&&((t=e.require("lightbox"))==null||t.ready()),(n==null?void 0:n.includes("slider"))&&((r=e.require("slider"))==null||r.redraw()),(n==null?void 0:n.includes("tabs"))&&((i=e.require("tabs"))==null||i.redraw()),new Promise(o=>e.push(()=>o(void 0)))}});var he=Ae(le(),1);var G=(n,e)=>{let t=n.getAttribute(e);return t?H(t):void 0};function ae(n){return n==null?void 0:n.trim().toLowerCase()}var A=class{constructor(e,t,r){this.element=e;this.list=t;this.currentIndex=r;this.props={};this.valid=!0;var o;this.href=(o=e.querySelector("a"))==null?void 0:o.href;let i=typeof r=="number";this.needsWebflowRestart=!i}collectProps({fieldKey:e,typeKey:t,rangeKey:r}){let{element:i,props:o}=this,s=[...i.querySelectorAll(`[${e}]`)];for(let l of s){let a=ae(l.getAttribute(e));if(!a)return;let{textContent:m,innerHTML:f}=l;if(!m)continue;let h=t?l.getAttribute(t):void 0,u=r?l.getAttribute(r):void 0;o[a]||(o[a]={type:h,range:u,values:new Set,elements:new Map});let g=o[a],{values:p,elements:b}=g;if(u==="from"||u==="to"){let E=[...p];E[u==="from"?0:1]=m,g.values=new Set(E)}p.add(m),b.has(m)||b.set(m,{element:l,originalHTML:f})}}};var J=({itemsCount:n,items:e})=>{n&&(n.textContent=`${e.length}`)};var je=new DOMParser,ce=n=>c(void 0,null,function*(){let t=yield(yield fetch(n)).text();return je.parseFromString(t,"text/html")});var{location:ue,history:He}=window,pe,me=n=>{if(!n)return;let{href:e}=n,{searchParams:t}=new URL(e);return[...t.entries()]},Re=r=>c(void 0,[r],function*({paginationNext:n,paginationPrevious:e,index:t}){let i=me(n||e);if(!i||!i.length)return;let o,s;if(i.length===1){let[a]=i;if(!a)return;[o,s]=a}else try{let{origin:a,pathname:m}=ue;pe||(pe=ce(a+m));let f=yield pe,u=L([],f)[t];if(!u)return;let g=d(u,"next"),[p]=me(g)||[];if(!p)return;[o]=p,[,s]=i.find(([b])=>b===o)||[]}catch(a){return}if(!o||!s)return;let l=parseInt(s);return[o,l]}),fe=n=>{let{paginationNext:e}=n;n.extractingPaginationData=new Promise(t=>c(void 0,null,function*(){let r=yield Re(n);if(!r){t();return}let[i,o]=r;n.pagesQuery=i,n.currentPage=e?o-1:o+1,t()}))},de=({currentPage:n,pagesQuery:e})=>{if(!e||!n)return;let t=new URL(ue.href),{searchParams:r}=t;r.set(e,`${n}`),He.replaceState(null,"",t.toString())};var ge=(a,m)=>c(void 0,[a,m],function*(n,{items:e,restartWebflow:t,restartIx:r,restartCommerce:i,restartLightbox:o,restartSliders:s,restartTabs:l}){let f=[[r,"ix2"],[i,"commerce"],[o,"lightbox"],[s,"slider"],[l,"tabs"]];if(!t&&!f.some(([u])=>u)||!n.some(({needsWebflowRestart:u})=>u))return;for(let u of e){let g=n.includes(u);u.needsWebflowRestart=!g}if(t){yield O();return}let h=f.reduce((u,[g,p])=>(g&&u.push(p),u),[]);yield O(h)});var be=(n,e=!1,t=!0)=>c(void 0,null,function*(){let{items:r,itemsPerPage:i,paginationActive:o,currentPage:s,emptyState:l}=n,a=[],m=[],f=[];for(let p of r){let{valid:b,currentIndex:E}=p,W=typeof E=="number";if(b){if(a.push(p),!o||!s){f.push(p);continue}a.length>(s-1)*i&&a.length<=s*i?f.push(p):W&&m.push(p)}else W&&m.push(p)}n.validItems=a,n.totalPages=Math.ceil(a.length/i)||1;let h=!a.length;n.emptyState=h;let u=[];f.forEach((p,b)=>{p.currentIndex!==b&&u.push([p,b,f[b-1]])});let g=t&&!e||l!==h;g&&(yield n.displayElement(l?"emptyElement":"list",!1)),yield Promise.all([...Fe(m,n,e),...Qe(u,n,e)]),yield n.emitSerial("renderitems",f),yield ge(f,n),g&&(yield n.displayElement(h?"emptyElement":"list"))}),Fe=(n,{itemsAnimation:e},t)=>n.map(r=>c(void 0,null,function*(){let{element:i}=r;if(t&&e){let{animateOut:o,options:s}=e;yield o(i,D({remove:!0},s))}else i.remove();r.currentIndex=void 0})),Qe=(n,{list:e,itemsAnimation:t},r)=>e?n.map((a,m)=>c(void 0,[a,m],function*([i,o,s],l){i.animating=new Promise(f=>c(void 0,null,function*(){i.rendering=new Promise(h=>c(void 0,null,function*(){yield s==null?void 0:s.rendering;let{element:u,currentIndex:g}=i,p=(s==null?void 0:s.element)||null;if(typeof g!="number"&&r&&t){let{prepareIn:E,animateIn:W,options:K}=t,b=K||{},{stagger:X}=b,ye=te(b,["stagger"]),Y=D({target:e,insertAfter:p},ye);E(u,Y),h(),X&&(yield R(X*l)),yield W(u,ee(D({},Y),{prepared:!0}))}else p?e.insertBefore(u,p.nextSibling):e.prepend(u),h();f()}))})),yield i.rendering,i.currentIndex=o})):[];var k=class extends he.default{constructor(e,t){super();this.wrapper=e;this.index=t;this.emptyState=!1;this.paginationActive=!1;this.showPaginationQuery=!1;this.restartWebflow=!1;this.restartIx=!1;this.restartCommerce=!1;this.restartLightbox=!1;this.restartSliders=!1;this.restartTabs=!1;let r=d(e,"list");this.list=r,this.paginationWrapper=d(e,"pagination"),this.paginationNext=d(e,"next"),this.paginationPrevious=d(e,"previous"),this.paginationCount=d(e,"pageCount"),this.emptyElement=d(e,"empty");let i=d(e,"items");this.itemsPerPage=this.originalItemsPerPage=i.length,this.totalPages=1,fe(this);let o=[];r&&o.push(...i.map((s,l)=>new A(s,r,l))),this.items=o,this.validItems=o,this.originalItemsOrder=[...o]}addItems(e,t="push"){return c(this,null,function*(){let{items:r,list:i,originalItemsOrder:o}=this;if(!i)return;let s=e.map(l=>new A(l,i));for(let l of[r,o])l[t](...s);J(this),yield this.emit("shouldnest",s),yield this.emit("shouldcollectprops",s),yield this.emit("shouldsort",s),yield this.emit("shouldfilter"),yield this.renderItems(!0),yield this.emit("additems",s)})}restoreItemsOrder(){this.items=[...this.originalItemsOrder]}clearItems(e){if(e)for(let{element:t}of this.items)t.remove();this.items=[],this.originalItemsOrder=[]}renderItems(e,t){return c(this,null,function*(){return yield this.renderingQueue,new Promise(r=>c(this,null,function*(){let i=be(this,e,t);this.renderingQueue=i,yield i,r()}))})}displayElement(e,t=!0,r=!0){return c(this,null,function*(){let{listAnimation:i}=this,o=this[e];if(!!o)if(i&&r){let{animateIn:s,animateOut:l,options:a}=i;yield(t?s:l)(o,a)}else o.style.display=t?"":"none",o.style.opacity=t?"1":"0"})}switchPage(e,t=!0){return c(this,null,function*(){let{currentPage:r,showPaginationQuery:i}=this;e!==r&&(yield this.emit("switchpage",e),this.currentPage=e,this.scrollToAnchor(),i&&de(this),t&&(yield this.renderItems()))})}initPagination(e){this.paginationActive=!0,this.showPaginationQuery=!!e}addPaginationButton(e,t,r){let{paginationWrapper:i}=this;!i||this[t]||r<0||(e.style.display="none",i.insertBefore(e,i.children[r]),this[t]=e)}addEmptyElement(e){let{wrapper:t,list:r,emptyElement:i}=this;i||(e.style.display="none",t.insertBefore(e,(r==null?void 0:r.nextSibling)||null),this.emptyElement=e)}addLoader(e){let{loader:t}=this;t||(e.style.display="none",this.loader=e)}addItemsCount(e){let{itemsCount:t}=this;t||(this.itemsCount=e,J(this))}scrollToAnchor(){let{scrollAnchor:e}=this;!e||window.setTimeout(()=>e.scrollIntoView({behavior:"smooth"}),100)}getAttribute(e){let{wrapper:t,list:r}=this;return t.getAttribute(e)||(r==null?void 0:r.getAttribute(e))}getInstanceIndex(e){let{wrapper:t,list:r}=this;return G(t,e)||(r?G(r,e):void 0)}};var Ve=n=>L(n).map(ze).filter(F),ze=n=>{var s,l;let e=d(n,"wrapper");if(!e){P.alert("The element is not a Collection List.","error");return}let{fsAttributes:t}=window;(s=t.cms).listInstances||(s.listInstances=[]),(l=t.cms).listElements||(l.listElements=[...document.querySelectorAll(`.${S.wrapper}`)]);let{listInstances:r,listElements:i}=t.cms,o=i.indexOf(e);if(o!==-1)return r[o]||(r[o]=new k(e,o)),r[o]};export{A as CMSItem,k as CMSList,Ve as createCMSListInstances,Te as version};
