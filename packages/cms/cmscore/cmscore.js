var ce=Object.create;var M=Object.defineProperty,pe=Object.defineProperties,me=Object.getOwnPropertyDescriptor,fe=Object.getOwnPropertyDescriptors,de=Object.getOwnPropertyNames,T=Object.getOwnPropertySymbols,ge=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var X=(n,e,t)=>e in n?M(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,W=(n,e)=>{for(var t in e||(e={}))k.call(e,t)&&X(n,t,e[t]);if(T)for(var t of T(e))Q.call(e,t)&&X(n,t,e[t]);return n},Y=(n,e)=>pe(n,fe(e)),be=n=>M(n,"__esModule",{value:!0});var Z=(n,e)=>{var t={};for(var r in n)k.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&T)for(var r of T(n))e.indexOf(r)<0&&Q.call(n,r)&&(t[r]=n[r]);return t};var ye=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var he=(n,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of de(e))!k.call(n,r)&&r!=="default"&&M(n,r,{get:()=>e[r],enumerable:!(t=me(e,r))||t.enumerable});return n},we=n=>he(be(M(n!=null?ce(ge(n)):{},"default",n&&n.__esModule&&"default"in n?{get:()=>n.default,enumerable:!0}:{value:n,enumerable:!0})),n);var c=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{l(t.next(u))}catch(m){i(m)}},s=u=>{try{l(t.throw(u))}catch(m){i(m)}},l=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);l((t=t.apply(n,e)).next())});var ie=ye(($e,ne)=>{"use strict";var y=new WeakMap,v=new WeakMap,A=new WeakMap,F=Symbol("anyProducer"),N=Promise.resolve(),D=Symbol("listenerAdded"),$=Symbol("listenerRemoved"),_=!1;function E(n){if(typeof n!="string"&&typeof n!="symbol")throw new TypeError("eventName must be a string or a symbol")}function O(n){if(typeof n!="function")throw new TypeError("listener must be a function")}function C(n,e){let t=v.get(n);return t.has(e)||t.set(e,new Set),t.get(e)}function L(n,e){let t=typeof e=="string"||typeof e=="symbol"?e:F,r=A.get(n);return r.has(t)||r.set(t,new Set),r.get(t)}function Ee(n,e,t){let r=A.get(n);if(r.has(e))for(let i of r.get(e))i.enqueue(t);if(r.has(F)){let i=Promise.all([e,t]);for(let o of r.get(F))o.enqueue(i)}}function ee(n,e){e=Array.isArray(e)?e:[e];let t=!1,r=()=>{},i=[],o={enqueue(s){i.push(s),r()},finish(){t=!0,r()}};for(let s of e)L(n,s).add(o);return{next(){return c(this,null,function*(){return i?i.length===0?t?(i=void 0,this.next()):(yield new Promise(s=>{r=s}),this.next()):{done:!1,value:yield i.shift()}:{done:!0}})},return(l){return c(this,arguments,function*(s){i=void 0;for(let u of e)L(n,u).delete(o);return r(),arguments.length>0?{done:!0,value:yield s}:{done:!0}})},[Symbol.asyncIterator](){return this}}}function te(n){if(n===void 0)return re;if(!Array.isArray(n))throw new TypeError("`methodNames` must be an array of strings");for(let e of n)if(!re.includes(e))throw typeof e!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${e} is not Emittery method`);return n}var B=n=>n===D||n===$,h=class{static mixin(e,t){return t=te(t),r=>{if(typeof r!="function")throw new TypeError("`target` must be function");for(let s of t)if(r.prototype[s]!==void 0)throw new Error(`The property \`${s}\` already exists on \`target\``);function i(){return Object.defineProperty(this,e,{enumerable:!1,value:new h}),this[e]}Object.defineProperty(r.prototype,e,{enumerable:!1,get:i});let o=s=>function(...l){return this[e][s](...l)};for(let s of t)Object.defineProperty(r.prototype,s,{enumerable:!1,value:o(s)});return r}}static get isDebugEnabled(){if(typeof process!="object")return _;let{env:e}=process||{env:{}};return e.DEBUG==="emittery"||e.DEBUG==="*"||_}static set isDebugEnabled(e){_=e}constructor(e={}){y.set(this,new Set),v.set(this,new Map),A.set(this,new Map),this.debug=e.debug||{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(t,r,i,o)=>{o=JSON.stringify(o),typeof i=="symbol"&&(i=i.toString());let s=new Date,l=`${s.getHours()}:${s.getMinutes()}:${s.getSeconds()}.${s.getMilliseconds()}`;console.log(`[${l}][emittery:${t}][${r}] Event Name: ${i}
	data: ${o}`)})}logIfDebugEnabled(e,t,r){(h.isDebugEnabled||this.debug.enabled)&&this.debug.logger(e,this.debug.name,t,r)}on(e,t){O(t),e=Array.isArray(e)?e:[e];for(let r of e)E(r),C(this,r).add(t),this.logIfDebugEnabled("subscribe",r,void 0),B(r)||this.emit(D,{eventName:r,listener:t});return this.off.bind(this,e,t)}off(e,t){O(t),e=Array.isArray(e)?e:[e];for(let r of e)E(r),C(this,r).delete(t),this.logIfDebugEnabled("unsubscribe",r,void 0),B(r)||this.emit($,{eventName:r,listener:t})}once(e){return new Promise(t=>{let r=this.on(e,i=>{r(),t(i)})})}events(e){e=Array.isArray(e)?e:[e];for(let t of e)E(t);return ee(this,e)}emit(e,t){return c(this,null,function*(){E(e),this.logIfDebugEnabled("emit",e,t),Ee(this,e,t);let r=C(this,e),i=y.get(this),o=[...r],s=B(e)?[]:[...i];yield N,yield Promise.all([...o.map(l=>c(this,null,function*(){if(r.has(l))return l(t)})),...s.map(l=>c(this,null,function*(){if(i.has(l))return l(e,t)}))])})}emitSerial(e,t){return c(this,null,function*(){E(e),this.logIfDebugEnabled("emitSerial",e,t);let r=C(this,e),i=y.get(this),o=[...r],s=[...i];yield N;for(let l of o)r.has(l)&&(yield l(t));for(let l of s)i.has(l)&&(yield l(e,t))})}onAny(e){return O(e),this.logIfDebugEnabled("subscribeAny",void 0,void 0),y.get(this).add(e),this.emit(D,{listener:e}),this.offAny.bind(this,e)}anyEvent(){return ee(this)}offAny(e){O(e),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),this.emit($,{listener:e}),y.get(this).delete(e)}clearListeners(e){e=Array.isArray(e)?e:[e];for(let t of e)if(this.logIfDebugEnabled("clear",t,void 0),typeof t=="string"||typeof t=="symbol"){C(this,t).clear();let r=L(this,t);for(let i of r)i.finish();r.clear()}else{y.get(this).clear();for(let r of v.get(this).values())r.clear();for(let r of A.get(this).values()){for(let i of r)i.finish();r.clear()}}}listenerCount(e){e=Array.isArray(e)?e:[e];let t=0;for(let r of e){if(typeof r=="string"){t+=y.get(this).size+C(this,r).size+L(this,r).size+L(this).size;continue}typeof r!="undefined"&&E(r),t+=y.get(this).size;for(let i of v.get(this).values())t+=i.size;for(let i of A.get(this).values())t+=i.size}return t}bindMethods(e,t){if(typeof e!="object"||e===null)throw new TypeError("`target` must be an object");t=te(t);for(let r of t){if(e[r]!==void 0)throw new Error(`The property \`${r}\` already exists on \`target\``);Object.defineProperty(e,r,{enumerable:!1,value:this[r].bind(this)})}}},re=Object.getOwnPropertyNames(h.prototype).filter(n=>n!=="constructor");Object.defineProperty(h,"listenerAdded",{value:D,writable:!1,enumerable:!0,configurable:!1});Object.defineProperty(h,"listenerRemoved",{value:$,writable:!1,enumerable:!0,configurable:!1});ne.exports=h});var se=we(ie());var P=class{constructor(e,t,r){this.element=e;this.list=t;this.currentIndex=r;this.props={};this.mustShow=!0;var i;this.href=(i=e.querySelector("a"))==null?void 0:i.href,this.ixRestarted=this.commerceRestarted=typeof r=="number"}collectProps({fieldKey:e,typeKey:t,rangeKey:r}){let{element:i,props:o}=this,s=[...i.querySelectorAll(`[${e}]`)];for(let l of s){let u=l.getAttribute(e),m=t?l.getAttribute(t):void 0,f=r?l.getAttribute(r):void 0,{textContent:b,innerHTML:a}=l;if(!u||!b)continue;o[u]||(o[u]={type:m,range:f,values:new Set,elements:new Map});let p=o[u],{values:d,elements:w}=p;if(f==="from"||f==="to"){let I=[...d];I[f==="from"?0:1]=b,p.values=new Set(I)}d.add(b),w.has(b)||w.set(b,{element:l,originalHTML:a})}}};var S=class{static activateAlerts(){this.alertsActivated=!0}static alert(e,t){if(this.alertsActivated&&window.alert(e),t==="error")throw new Error(e)}};S.alertsActivated=!1;var x={wrapper:"w-dyn-list",list:"w-dyn-items",item:"w-dyn-item",paginationWrapper:"w-pagination-wrapper",paginationNext:"w-pagination-next",paginationPrevious:"w-pagination-previous",pageCount:"w-page-count",emptyState:"w-dyn-empty"};var q=n=>{let e=n.split("-"),t=parseInt(e[e.length-1]);if(!isNaN(t))return t};var R=n=>new Promise(e=>setTimeout(e,n));var H=n=>n!=null;var{wrapper:Ce,list:Se,paginationWrapper:xe,paginationNext:Ae,paginationPrevious:Le,emptyState:Pe,pageCount:Ie}=x;function g(n,e,t=document){let r=typeof n=="string"?t.querySelector(n):n;if(!r)return;let i=r.closest(`.${Ce}`);if(!i)return;let o=i.querySelector(`.${Se}`);return e==="wrapper"?i:e==="list"?o:e==="items"?[...(o==null?void 0:o.children)||[]]:e==="empty"?i.querySelector(`.${Pe}`):e==="pageCount"?i.querySelector(`.${Ie}`):e==="pagination"?i.querySelector(`.${xe}`):i.querySelector(`.${e==="next"?Ae:Le}`)}var j=(n,e=document)=>{n=n.filter(o=>o);let t=n.join(", ")||`.${x.wrapper}`;return[...e.querySelectorAll(t)].reduce((o,s)=>{if(!s)return o;let l=g(s,"wrapper");return!l||o.includes(l)||o.push(l),o},[])};var z=()=>document.documentElement.getAttribute("data-wf-site");var K=n=>c(void 0,null,function*(){let{Webflow:e}=window;if(!(!e||!("destroy"in e)||!("ready"in e)||!("require"in e))&&!(n&&!n.length)){if(n||(e.destroy(),e.ready()),!n||n.includes("ix2")){let t=e.require("ix2");t&&(t.destroy(),t.init())}if(!n||n.includes("commerce")){let t=e.require("commerce"),r=z();t&&r&&(t.destroy(),t.init({siteId:r,apiUrl:"https://render.webflow.com"}))}return new Promise(t=>e.push(()=>t(void 0)))}});var G=(n,e)=>{let t=n.getAttribute(e);return t?q(t):void 0};var oe=(n,e=!1)=>c(void 0,null,function*(){let{items:t,itemsPerPage:r,currentPage:i,emptyState:o,restartIx:s,restartCommerce:l}=n,u=[],m=[],f=0;for(let a of t){let{mustShow:p,currentIndex:d}=a;if(p){if(f+=1,!i){m.push(a);continue}f>(i-1)*r&&f<=i*r?m.push(a):typeof d=="number"&&u.push(a)}else typeof d=="number"&&u.push(a)}n.visibleItems=f,n.totalPages=Math.ceil(f/r);let b=[];if(m.forEach((a,p)=>{a.currentIndex!==p&&b.push([a,p,m[p-1]])}),e||(yield n.displayElement(o?"emptyElement":"list",!1)),yield Promise.all([...Me(u,n,e),...Te(b,n,e)]),yield n.emitSerial("renderitems",m),s||l){let a=[];if(s&&m.some(({ixRestarted:p})=>!p)&&a.push("ix2"),l&&m.some(({commerceRestarted:p})=>!p)&&a.push("commerce"),a.length)for(let p of t){let d=m.includes(p);s&&(p.ixRestarted=d),l&&(p.commerceRestarted=d)}yield K(a)}if(!e){let a=!f;n.emptyState=a,yield n.displayElement(a?"emptyElement":"list")}}),Me=(n,{itemsAnimation:e},t)=>n.map(r=>c(void 0,null,function*(){let{element:i}=r;if(t&&e){let{animateOut:o,options:s}=e;yield o(i,W({remove:!0},s))}else i.remove();r.currentIndex=void 0})),Te=(n,{list:e,itemsAnimation:t},r)=>n.map((u,m)=>c(void 0,[u,m],function*([i,o,s],l){i.animating=new Promise(f=>c(void 0,null,function*(){i.rendering=new Promise(b=>c(void 0,null,function*(){yield s==null?void 0:s.rendering;let{element:a,currentIndex:p}=i,d=(s==null?void 0:s.element)||null;if(typeof p!="number"&&r&&t){let{prepareIn:I,animateIn:le,options:ae}=t,w=ae||{},{stagger:U}=w,ue=Z(w,["stagger"]),J=W({target:e,insertAfter:d},ue);I(a,J),b(),U&&(yield R(U*l)),yield le(a,Y(W({},J),{prepared:!0}))}else d?e.insertBefore(a,d.nextSibling):e.prepend(a),b();f()}))})),yield i.rendering,i.currentIndex=o}));var V=class extends se.default{constructor(e,t){super();this.wrapper=e;this.index=t;this.restartIx=!1;this.restartCommerce=!1;this.list=g(this.wrapper,"list"),this.paginationWrapper=g(this.wrapper,"pagination"),this.paginationNext=g(this.wrapper,"next"),this.paginationPrevious=g(this.wrapper,"previous"),this.paginationCount=g(this.wrapper,"pageCount");let r=g(this.wrapper,"items");this.visibleItems=this.itemsPerPage=r.length,this.totalPages=1,this.items=r.map((i,o)=>new P(i,this.list,o))}addItems(e){return c(this,null,function*(){let{items:t,list:r}=this,i=e.map(o=>new P(o,r));t.push(...i),this.updateItemsCount(),yield this.emit("shouldnest",i),yield this.emit("shouldcollectprops",i),yield this.emit("shouldsort",i),yield this.emit("shouldfilter"),yield this.renderItems(!0),yield this.emit("additems",i)})}renderItems(e){return c(this,null,function*(){return yield this.renderingQueue,new Promise(t=>c(this,null,function*(){let r=oe(this,e);this.renderingQueue=r,yield r,t()}))})}displayElement(e,t=!0,r=!0){return c(this,null,function*(){let{listAnimation:i}=this,o=this[e];if(!!o)if(i&&r){let{animateIn:s,animateOut:l,options:u}=i;yield(t?s:l)(o,u)}else o.style.display=t?"":"none"})}switchPage(e,t=!0){return c(this,null,function*(){let{currentPage:r}=this;e!==r&&(yield this.emit("switchpage",e),this.currentPage=e,t&&this.scrollToAnchor(),r&&(yield this.renderItems()))})}addEmptyElement(e){let{wrapper:t,list:r,emptyElement:i}=this;i||(e.style.display="none",t.insertBefore(e,r.nextSibling),this.emptyElement=e)}addPaginationPrevious(e){var i;let{paginationPrevious:t,paginationNext:r}=this;t||(e.style.display="none",(i=r==null?void 0:r.parentElement)==null||i.prepend(e),this.paginationPrevious=e)}addLoader(e){let{loader:t}=this;t||(e.style.display="none",this.loader=e)}addItemsCount(e){let{itemsCount:t}=this;t||(this.itemsCount=e,this.updateItemsCount())}updateItemsCount(){let{itemsCount:e,items:t}=this;e&&(e.textContent=`${t.length}`)}scrollToAnchor(){var e;(e=this.scrollAnchor)==null||e.scrollIntoView({behavior:"smooth"})}getAttribute(e){let{wrapper:t,list:r}=this;return t.getAttribute(e)||r.getAttribute(e)}getInstanceIndex(e){let{wrapper:t,list:r}=this;return G(t,e)||G(r,e)}};var We=n=>j(n).map(ve).filter(H),ve=n=>{var s,l;let e=g(n,"wrapper");if(!e){S.alert("The element is not a Collection List.","error");return}let{fsAttributes:t}=window;(s=t.cms).lists||(s.lists=[]),(l=t.cms).listElements||(l.listElements=[...document.querySelectorAll(`.${x.wrapper}`)]);let{lists:r,listElements:i}=t.cms,o=i.indexOf(e);if(o!==-1)return r[o]||(r[o]=new V(e,o)),r[o]};export{P as CMSItem,V as CMSList,We as createCMSListInstances};
