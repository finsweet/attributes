var Q=Object.create;var x=Object.defineProperty;var Y=Object.getOwnPropertyDescriptor;var Z=Object.getOwnPropertyNames,F=Object.getOwnPropertySymbols,N=Object.getPrototypeOf,R=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var j=(n,e,t)=>e in n?x(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,T=(n,e)=>{for(var t in e||(e={}))R.call(e,t)&&j(n,t,e[t]);if(F)for(var t of F(e))ee.call(e,t)&&j(n,t,e[t]);return n};var te=n=>x(n,"__esModule",{value:!0});var re=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var ne=(n,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Z(e))!R.call(n,r)&&r!=="default"&&x(n,r,{get:()=>e[r],enumerable:!(t=Y(e,r))||t.enumerable});return n},oe=n=>ne(te(x(n!=null?Q(N(n)):{},"default",n&&n.__esModule&&"default"in n?{get:()=>n.default,enumerable:!0}:{value:n,enumerable:!0})),n);var u=(n,e,t)=>new Promise((r,o)=>{var s=a=>{try{i(t.next(a))}catch(c){o(c)}},l=a=>{try{i(t.throw(a))}catch(c){o(c)}},i=a=>a.done?r(a.value):Promise.resolve(a.value).then(s,l);i((t=t.apply(n,e)).next())});var U=re((be,K)=>{"use strict";var f=new WeakMap,E=new WeakMap,h=new WeakMap,v=Symbol("anyProducer"),q=Promise.resolve(),C=Symbol("listenerAdded"),A=Symbol("listenerRemoved"),$=!1;function d(n){if(typeof n!="string"&&typeof n!="symbol")throw new TypeError("eventName must be a string or a symbol")}function I(n){if(typeof n!="function")throw new TypeError("listener must be a function")}function b(n,e){let t=E.get(n);return t.has(e)||t.set(e,new Set),t.get(e)}function S(n,e){let t=typeof e=="string"||typeof e=="symbol"?e:v,r=h.get(n);return r.has(t)||r.set(t,new Set),r.get(t)}function ie(n,e,t){let r=h.get(n);if(r.has(e))for(let o of r.get(e))o.enqueue(t);if(r.has(v)){let o=Promise.all([e,t]);for(let s of r.get(v))s.enqueue(o)}}function H(n,e){e=Array.isArray(e)?e:[e];let t=!1,r=()=>{},o=[],s={enqueue(l){o.push(l),r()},finish(){t=!0,r()}};for(let l of e)S(n,l).add(s);return{next(){return u(this,null,function*(){return o?o.length===0?t?(o=void 0,this.next()):(yield new Promise(l=>{r=l}),this.next()):{done:!1,value:yield o.shift()}:{done:!0}})},return(i){return u(this,arguments,function*(l){o=void 0;for(let a of e)S(n,a).delete(s);return r(),arguments.length>0?{done:!0,value:yield l}:{done:!0}})},[Symbol.asyncIterator](){return this}}}function z(n){if(n===void 0)return G;if(!Array.isArray(n))throw new TypeError("`methodNames` must be an array of strings");for(let e of n)if(!G.includes(e))throw typeof e!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${e} is not Emittery method`);return n}var D=n=>n===C||n===A,p=class{static mixin(e,t){return t=z(t),r=>{if(typeof r!="function")throw new TypeError("`target` must be function");for(let l of t)if(r.prototype[l]!==void 0)throw new Error(`The property \`${l}\` already exists on \`target\``);function o(){return Object.defineProperty(this,e,{enumerable:!1,value:new p}),this[e]}Object.defineProperty(r.prototype,e,{enumerable:!1,get:o});let s=l=>function(...i){return this[e][l](...i)};for(let l of t)Object.defineProperty(r.prototype,l,{enumerable:!1,value:s(l)});return r}}static get isDebugEnabled(){if(typeof process!="object")return $;let{env:e}=process||{env:{}};return e.DEBUG==="emittery"||e.DEBUG==="*"||$}static set isDebugEnabled(e){$=e}constructor(e={}){f.set(this,new Set),E.set(this,new Map),h.set(this,new Map),this.debug=e.debug||{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(t,r,o,s)=>{s=JSON.stringify(s),typeof o=="symbol"&&(o=o.toString());let l=new Date,i=`${l.getHours()}:${l.getMinutes()}:${l.getSeconds()}.${l.getMilliseconds()}`;console.log(`[${i}][emittery:${t}][${r}] Event Name: ${o}
	data: ${s}`)})}logIfDebugEnabled(e,t,r){(p.isDebugEnabled||this.debug.enabled)&&this.debug.logger(e,this.debug.name,t,r)}on(e,t){I(t),e=Array.isArray(e)?e:[e];for(let r of e)d(r),b(this,r).add(t),this.logIfDebugEnabled("subscribe",r,void 0),D(r)||this.emit(C,{eventName:r,listener:t});return this.off.bind(this,e,t)}off(e,t){I(t),e=Array.isArray(e)?e:[e];for(let r of e)d(r),b(this,r).delete(t),this.logIfDebugEnabled("unsubscribe",r,void 0),D(r)||this.emit(A,{eventName:r,listener:t})}once(e){return new Promise(t=>{let r=this.on(e,o=>{r(),t(o)})})}events(e){e=Array.isArray(e)?e:[e];for(let t of e)d(t);return H(this,e)}emit(e,t){return u(this,null,function*(){d(e),this.logIfDebugEnabled("emit",e,t),ie(this,e,t);let r=b(this,e),o=f.get(this),s=[...r],l=D(e)?[]:[...o];yield q,yield Promise.all([...s.map(i=>u(this,null,function*(){if(r.has(i))return i(t)})),...l.map(i=>u(this,null,function*(){if(o.has(i))return i(e,t)}))])})}emitSerial(e,t){return u(this,null,function*(){d(e),this.logIfDebugEnabled("emitSerial",e,t);let r=b(this,e),o=f.get(this),s=[...r],l=[...o];yield q;for(let i of s)r.has(i)&&(yield i(t));for(let i of l)o.has(i)&&(yield i(e,t))})}onAny(e){return I(e),this.logIfDebugEnabled("subscribeAny",void 0,void 0),f.get(this).add(e),this.emit(C,{listener:e}),this.offAny.bind(this,e)}anyEvent(){return H(this)}offAny(e){I(e),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),this.emit(A,{listener:e}),f.get(this).delete(e)}clearListeners(e){e=Array.isArray(e)?e:[e];for(let t of e)if(this.logIfDebugEnabled("clear",t,void 0),typeof t=="string"||typeof t=="symbol"){b(this,t).clear();let r=S(this,t);for(let o of r)o.finish();r.clear()}else{f.get(this).clear();for(let r of E.get(this).values())r.clear();for(let r of h.get(this).values()){for(let o of r)o.finish();r.clear()}}}listenerCount(e){e=Array.isArray(e)?e:[e];let t=0;for(let r of e){if(typeof r=="string"){t+=f.get(this).size+b(this,r).size+S(this,r).size+S(this).size;continue}typeof r!="undefined"&&d(r),t+=f.get(this).size;for(let o of E.get(this).values())t+=o.size;for(let o of h.get(this).values())t+=o.size}return t}bindMethods(e,t){if(typeof e!="object"||e===null)throw new TypeError("`target` must be an object");t=z(t);for(let r of t){if(e[r]!==void 0)throw new Error(`The property \`${r}\` already exists on \`target\``);Object.defineProperty(e,r,{enumerable:!1,value:this[r].bind(this)})}}},G=Object.getOwnPropertyNames(p.prototype).filter(n=>n!=="constructor");Object.defineProperty(p,"listenerAdded",{value:C,writable:!1,enumerable:!0,configurable:!1});Object.defineProperty(p,"listenerRemoved",{value:A,writable:!1,enumerable:!0,configurable:!1});K.exports=p});var J=oe(U());var g=class{static activateAlerts(){this.alertsActivated=!0}static alert(e,t){if(this.alertsActivated&&window.alert(e),t==="error")throw new Error(e)}};g.alertsActivated=!1;var L={wrapper:"w-dyn-list",list:"w-dyn-items",item:"w-dyn-item",paginationNext:"w-pagination-next",paginationPrevious:"w-pagination-previous",emptyState:"w-dyn-empty"};var O=n=>{let e=n.split("-"),t=parseInt(e[e.length-1]);if(!isNaN(t))return t};var V=n=>!!(n.offsetWidth||n.offsetHeight||n.getClientRects().length);var{wrapper:se,list:le,paginationNext:ae,paginationPrevious:ce,emptyState:ue}=L;function m(n,e,t=document){let r=typeof n=="string"?t.querySelector(n):n;if(!r)return;let o=r.closest(`.${se}`);if(!o)return;let s=o.querySelector(`.${le}`);return e==="wrapper"?o:e==="list"?s:e==="items"?[...(s==null?void 0:s.children)||[]]:e==="empty"?o.querySelector(`.${ue}`):o.querySelector(`.${e==="next"?ae:ce}`)}var k=(n,e)=>{let t=n.getAttribute(e);return t?O(t):void 0};var y=class{constructor(e,t){this.element=e;this.list=t;this.props={};this.isShowing=!1;this.isHiding=!1;var r;this.visible=V(e),this.href=(r=e.querySelector("a"))==null?void 0:r.href}};var M=class extends J.default{constructor(e,{pageIndex:t}={}){super();this.wrapper=e;this.showNewItems=!0;this.pageIndex=t,this.list=m(this.wrapper,"list"),this.paginationNext=m(this.wrapper,"next"),this.paginationPrevious=m(this.wrapper,"previous");let r=m(this.wrapper,"items");this.itemsPerPage=r.length,this.items=r.map(o=>new y(o,this.list))}renderItems(e,t=!0,r=!0){return u(this,null,function*(){let{itemsAnimation:o,list:s}=this;if(Array.isArray(e)||(e=[e]),!e.length)return;let l=e.map(({element:i})=>i);for(let i of e)i[t?"isShowing":"isHiding"]=!0;if(r&&o){let{animateIn:i,animateOut:a,options:c}=o;t?yield i(l,T({target:s},c)):yield a(l,T({remove:!0},c))}else for(let i of l)t?s.appendChild(i):i.remove();for(let i of e)i[t?"isShowing":"isHiding"]=!1,i.visible=t})}displayList(e=!0,t=!0){return u(this,null,function*(){let{wrapper:r,listAnimation:o}=this;if(t&&o){let{animateIn:s,animateOut:l,options:i}=o;yield(e?s:l)(r,i)}else r.style.display=e?"":"none"})}getAttribute(e){let{wrapper:t,list:r}=this;return t.getAttribute(e)||r.getAttribute(e)}getInstanceIndex(e){let{wrapper:t,list:r}=this;return k(t,e)||k(r,e)}};var fe=n=>{var l,i;let e=m(n,"wrapper");if(!e){g.alert("The element is not a Collection List.","error");return}let{fsAttributes:t}=window;(l=t.cms).lists||(l.lists=[]),(i=t.cms).listElements||(i.listElements=[...document.querySelectorAll(`.${L.wrapper}`)]);let{lists:r,listElements:o}=t.cms,s=o.indexOf(e);if(s!==-1)return r[s]||(r[s]=new M(e,{pageIndex:s})),r[s]},pe=(n,e)=>u(void 0,null,function*(){let{items:t,list:r,showNewItems:o}=n,s=e.map(l=>new y(l,r));t.push(...s),yield n.emitSerial("beforeadditems",s),o&&(yield n.renderItems(s)),yield n.emitSerial("afteradditems",s)});var me=(n,{fieldKey:e,typeKey:t,rangeKey:r})=>{for(let o of n){let l=[...o.element.querySelectorAll(`[${e}]`)].reduce((i,a)=>{let c=a.getAttribute(e),X=t?a.getAttribute(t):void 0,w=r?a.getAttribute(r):void 0,{textContent:P}=a;if(!c||!P)return i;i[c]||(i[c]={type:X,range:w,values:new Set});let _=i[c],{values:W}=_;if(w==="from"||w==="to"){let B=[...W];B[w==="from"?0:1]=P,_.values=new Set(B)}return W.add(P),i},{});o.props=l}};export{y as CMSItem,M as CMSList,pe as addItemsToList,me as collectItemsProps,fe as createCMSListInstance};
