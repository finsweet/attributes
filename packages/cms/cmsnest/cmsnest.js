(()=>{var p=(e,t,o)=>new Promise((i,r)=>{var n=l=>{try{s(o.next(l))}catch(c){r(c)}},f=l=>{try{s(o.throw(l))}catch(c){r(c)}},s=l=>l.done?i(l.value):Promise.resolve(l.value).then(n,f);s((o=o.apply(e,t)).next())});var m=class{static activateAlerts(){this.alertsActivated=!0}static alert(t,o){if(this.alertsActivated&&window.alert(t),o==="error")throw new Error(t)}};m.alertsActivated=!1;var b={wrapper:"w-dyn-list",list:"w-dyn-items",item:"w-dyn-item",paginationWrapper:"w-pagination-wrapper",paginationNext:"w-pagination-next",paginationPrevious:"w-pagination-previous",pageCount:"w-page-count",emptyState:"w-dyn-empty"};var w=(e,t=!0)=>e.cloneNode(t);var{wrapper:X,list:J,paginationWrapper:Q,paginationNext:Y,paginationPrevious:Z,emptyState:ee,pageCount:te}=b;function d(e,t,o=document){let i=typeof e=="string"?o.querySelector(e):e;if(!i)return;let r=i.closest(`.${X}`);if(!r)return;let n=r.querySelector(`.${J}`);return t==="wrapper"?r:t==="list"?n:t==="items"?[...(n==null?void 0:n.children)||[]]:t==="empty"?r.querySelector(`.${ee}`):t==="pageCount"?r.querySelector(`.${te}`):t==="pagination"?r.querySelector(`.${Q}`):r.querySelector(`.${t==="next"?Y:Z}`)}var N=(e,t=document)=>{e=e.filter(n=>n);let o=e.join(", ")||`.${b.wrapper}`;return[...t.querySelectorAll(o)].reduce((n,f)=>{if(!f)return n;let s=d(f,"wrapper");return!s||n.includes(s)||n.push(s),n},[])};var V="fs-attributes",O={preventLoad:{key:`${V}-preventload`},debugMode:{key:`${V}-debug`}};var B=()=>{window.fsAttributes||(window.fsAttributes={cms:{}})},R=e=>{let{preventLoad:t,debugMode:o}=O,i=typeof(e==null?void 0:e.getAttribute(t.key))=="string";return typeof(e==null?void 0:e.getAttribute(o.key))=="string"&&m.activateAlerts(),{preventsLoad:i}};var F=e=>{let t=(i,r,n)=>{let f=e[i],{key:s,values:l}=f,c;if(!r)return`[${s}]`;let g=l==null?void 0:l[r];if(typeof g=="string"?c=g:c=g(n&&"instanceIndex"in n?n.instanceIndex:void 0),!(n==null?void 0:n.operator))return`[${s}="${c}"]`;switch(n.operator){case"prefixed":return`[${s}^="${c}"]`;case"suffixed":return`[${s}$="${c}"]`;case"contains":return`[${s}*="${c}"]`}};return[t,(i,r)=>{let n=t("element",i,r);return((r==null?void 0:r.scope)||document).querySelector(n)}]};var oe="https://cdn.jsdelivr.net/npm/@finsweet/attributes-cmscore@1/cmscore.js";var A=()=>p(void 0,null,function*(){let{fsAttributes:e}=window;e.cms||(e.cms={});let{cms:t}=e;if(t.coreImport)return t.coreImport;try{let o=import(oe);return t.coreImport=o,o.then(i=>{i&&(t.coreVersion||(t.coreVersion=i.version))}),o}catch(o){m.alert(`${o}`,"error");return}});var P="fs-cmsnest",C={element:{key:`${P}-element`,values:{list:"list"}},collection:{key:`${P}-collection`},empty:{key:`${P}-empty`}},[u,_e]=F(C);function S(e){return e==null?void 0:e.trim().toLowerCase()}var{collection:{key:q},empty:{key:re}}=C,K=({createCMSListInstances:e})=>{let t=new Map,o=e([u("collection")]);for(let i of o){let r=S(i.getAttribute(q));if(!r)continue;let n=document.querySelector(`[${re}^="${r}"]`);n&&n.remove(),i.wrapper.remove(),t.set(r,{listInstance:i,emptyElement:n})}return t},U=e=>{let t=new Map,o=e.querySelectorAll(u("collection"));for(let i of o){let r=S(i.getAttribute(q));!r||t.set(r,i)}return t};var ne=new DOMParser,h=(r,n,f)=>p(void 0,[r,n,f],function*({element:e,href:t},o,{CMSList:i}){if(!t)return;let s=U(e);if(!s.size)return;let c=yield(yield fetch(t)).text(),g=ne.parseFromString(c,"text/html"),H=N([u("collection")],g);for(let z of H){let M=new i(z),T=S(M.getAttribute(C.collection.key));if(!T)continue;let k=o.get(T),x=s.get(T);if(!k||!x)continue;let _=x.parentElement;if(!_)continue;let{listInstance:W,emptyElement:I}=k,L=M.items.reduce((a,{href:v})=>{if(!v)return a;let y=W.items.find(D=>D.href&&v===D.href);return y&&a.push(y.element),a},[]);if(!L.length&&!I)continue;let E=w(W.wrapper),G=d(E,"items");if(L.length)for(let a of G)!!L.find(y=>y.isEqualNode(a))||a.remove();else if(I){let a=d(E,"list");a==null||a.remove(),E.appendChild(w(I))}_.insertBefore(E,x),x.remove()}});var $=()=>p(void 0,null,function*(){let e=yield A();if(!e)return[];let t=e.createCMSListInstances([u("element","list",{operator:"prefixed"})]);for(let o of t)j(o,e);return yield Promise.all(t.map(o=>j(o,e))),t}),j=(e,t)=>p(void 0,null,function*(){let o=K(t);if(!o.size){m.alert(`No collections to nest found for the list n\xBA ${e.index}`,"info");return}e.on("shouldnest",r=>p(void 0,null,function*(){yield Promise.all(r.map(n=>h(n,o,t)))}));let i=[...e.items];yield Promise.all(i.map(r=>h(r,o,t))),yield e.emitSerial("nestinitialitems",i)});B();var{currentScript:ie}=document,{preventsLoad:se}=R(ie);A();se?window.fsAttributes.cmsnest={init:$}:(window.Webflow||(window.Webflow=[]),window.Webflow.push($));})();
