(()=>{var p=(e,t,o)=>new Promise((n,r)=>{var i=l=>{try{s(o.next(l))}catch(c){r(c)}},f=l=>{try{s(o.throw(l))}catch(c){r(c)}},s=l=>l.done?n(l.value):Promise.resolve(l.value).then(i,f);s((o=o.apply(e,t)).next())});var a=class{static activateAlerts(){this.alertsActivated=!0}static alert(t,o){if(this.alertsActivated&&window.alert(t),o==="error")throw new Error(t)}};a.alertsActivated=!1;var b={wrapper:"w-dyn-list",list:"w-dyn-items",item:"w-dyn-item",paginationWrapper:"w-pagination-wrapper",paginationNext:"w-pagination-next",paginationPrevious:"w-pagination-previous",pageCount:"w-page-count",emptyState:"w-dyn-empty"};var T=(e,t=!0)=>e.cloneNode(t);var{wrapper:J,list:Q,paginationWrapper:Z,paginationNext:ee,paginationPrevious:te,emptyState:oe,pageCount:re}=b;function S(e,t,o=document){let n=typeof e=="string"?o.querySelector(e):e;if(!n)return;let r=n.closest(`.${J}`);if(!r)return;let i=r.querySelector(`.${Q}`);return t==="wrapper"?r:t==="list"?i:t==="items"?[...(i==null?void 0:i.children)||[]]:t==="pageCount"?r.querySelector(`.${re}`):t==="empty"?r.querySelector(`:scope > .${oe}`):t==="pagination"?r.querySelector(`.${Z}`):r.querySelector(`.${t==="next"?ee:te}`)}var N=(e,t=document)=>{e=e.filter(i=>i);let o=e.join(", ")||`.${b.wrapper}`;return[...t.querySelectorAll(o)].reduce((i,f)=>{if(!f)return i;let s=S(f,"wrapper");return!s||i.includes(s)||i.push(s),i},[])};var O="fs-attributes",V={preventLoad:{key:`${O}-preventload`},debugMode:{key:`${O}-debug`}};var K=e=>{let{preventLoad:t,debugMode:o}=V,n=typeof(e==null?void 0:e.getAttribute(t.key))=="string";return typeof(e==null?void 0:e.getAttribute(o.key))=="string"&&a.activateAlerts(),{preventsLoad:n}};var q=()=>{window.fsAttributes||(window.fsAttributes={cms:{}})};var ne="https://cdn.jsdelivr.net/npm/@finsweet/attributes-cmscore@1/cmscore.js",A=()=>p(void 0,null,function*(){let{fsAttributes:e}=window;e.cms||(e.cms={});let{cms:t}=e;if(t.coreImport)return t.coreImport;try{let o=import(ne);return t.coreImport=o,o.then(n=>{n&&(t.coreVersion||(t.coreVersion=n.version))}),o}catch(o){a.alert(`${o}`,"error");return}});function E(e){return e==null?void 0:e.trim().toLowerCase()}var F=e=>{let t=(n,r,i)=>{let f=e[n],{key:s,values:l}=f,c;if(!r)return`[${s}]`;let g=l==null?void 0:l[r];if(typeof g=="string"?c=g:c=g(i&&"instanceIndex"in i?i.instanceIndex:void 0),!(i==null?void 0:i.operator))return`[${s}="${c}"]`;switch(i.operator){case"prefixed":return`[${s}^="${c}"]`;case"suffixed":return`[${s}$="${c}"]`;case"contains":return`[${s}*="${c}"]`}};return[t,(n,r)=>{let i=t("element",n,r);return((r==null?void 0:r.scope)||document).querySelector(i)}]};var P="cmsnest",$=`fs-${P}`,ie="list",se="collection",le="empty",x={element:{key:`${$}-element`,values:{list:ie}},collection:{key:`${$}-${se}`},empty:{key:`${$}-${le}`}},[u,qe]=F(x);var{collection:{key:U},empty:{key:ce}}=x,H=({createCMSListInstances:e})=>{let t=new Map,o=e([u("collection")]);for(let n of o){let r=E(n.getAttribute(U));if(!r)continue;let i=document.querySelector(`[${ce}^="${r}"]`);i&&(i.style.display="none"),n.wrapper.style.display="none",t.set(r,{listInstance:n,emptyElement:i})}return t},z=e=>{let t=new Map,o=e.querySelectorAll(u("collection"));for(let n of o){let r=E(n.getAttribute(U));!r||t.set(r,n)}return t};var me=new DOMParser,L=(r,i,f)=>p(void 0,[r,i,f],function*({element:e,href:t},o,{CMSList:n}){if(!t)return;let s=z(e);if(!s.size)return;let c=yield(yield fetch(t)).text(),g=me.parseFromString(c,"text/html");N([u("collection")],g).forEach((j,X)=>{let k=new n(j,X),I=E(k.getAttribute(x.collection.key));if(!I)return;let W=o.get(I),y=s.get(I);if(!W||!y)return;let B=y.parentElement;if(!B)return;let{listInstance:R,emptyElement:v}=W,M=k.items.reduce((m,{href:d})=>{if(!d)return m;let w=R.items.find(D=>D.href&&d===D.href);return w&&m.push(w.element),m},[]);if(!M.length&&!v)return;let C=T(R.wrapper),Y=S(C,"items");if(C.style.display="",M.length)for(let m of Y)!!M.find(w=>w.isEqualNode(m))||m.remove();else if(v){let m=S(C,"list");m==null||m.remove();let d=T(v);d.style.display="",C.appendChild(d)}B.insertBefore(C,y),y.remove()})});var G=(e,t,o)=>{e.on("shouldnest",n=>p(void 0,null,function*(){yield Promise.all(n.map(r=>L(r,t,o)))}))};var _=(e,t)=>p(void 0,null,function*(){let o=H(t);if(!o.size){a.alert(`No collections to nest found for the list n\xBA ${e.index}`,"info");return}G(e,o,t);let n=[...e.items];yield Promise.all(n.map(r=>L(r,o,t))),yield e.emitSerial("nestinitialitems",n)});var h=()=>p(void 0,null,function*(){let e=yield A();if(!e)return[];let t=e.createCMSListInstances([u("element","list",{operator:"prefixed"})]);for(let o of t)_(o,e);return yield Promise.all(t.map(o=>_(o,e))),t});q();var{currentScript:pe}=document,{preventsLoad:ae}=K(pe);A();ae?window.fsAttributes[P]={init:h}:(window.Webflow||(window.Webflow=[]),window.Webflow.push(h));})();
