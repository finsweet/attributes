(()=>{var p=(e,t,n)=>new Promise((r,o)=>{var i=s=>{try{l(n.next(s))}catch(m){o(m)}},a=s=>{try{l(n.throw(s))}catch(m){o(m)}},l=s=>s.done?r(s.value):Promise.resolve(s.value).then(i,a);l((n=n.apply(e,t)).next())});var u=class{static activateAlerts(){this.alertsActivated=!0}static alert(t,n){if(this.alertsActivated&&window.alert(t),n==="error")throw new Error(t)}};u.alertsActivated=!1;var y={wrapper:"w-dyn-list",list:"w-dyn-items",item:"w-dyn-item",paginationWrapper:"w-pagination-wrapper",paginationNext:"w-pagination-next",paginationPrevious:"w-pagination-previous",pageCount:"w-page-count",emptyState:"w-dyn-empty"};var E=(e,t=!0)=>e.cloneNode(t);var{wrapper:G,list:X,paginationWrapper:z,paginationNext:J,paginationPrevious:Q,emptyState:Y,pageCount:Z}=y;function g(e,t,n=document){let r=typeof e=="string"?n.querySelector(e):e;if(!r)return;let o=r.closest(`.${G}`);if(!o)return;let i=o.querySelector(`.${X}`);return t==="wrapper"?o:t==="list"?i:t==="items"?[...(i==null?void 0:i.children)||[]]:t==="empty"?o.querySelector(`.${Y}`):t==="pageCount"?o.querySelector(`.${Z}`):t==="pagination"?o.querySelector(`.${z}`):o.querySelector(`.${t==="next"?J:Q}`)}var L=(e,t=document)=>{e=e.filter(i=>i);let n=e.join(", ")||`.${y.wrapper}`;return[...t.querySelectorAll(n)].reduce((i,a)=>{if(!a)return i;let l=g(a,"wrapper");return!l||i.includes(l)||i.push(l),i},[])};var _="fs-attributes",D={preventLoad:{key:`${_}-preventload`},debugMode:{key:`${_}-debug`}};var V=()=>{window.fsAttributes||(window.fsAttributes={cms:{}})},R=e=>{let{preventLoad:t,debugMode:n}=D,r=typeof(e==null?void 0:e.getAttribute(t.key))=="string";return typeof(e==null?void 0:e.getAttribute(n.key))=="string"&&u.activateAlerts(),{preventsLoad:r}};var B=e=>(n,r,o)=>{let i=e[n],{key:a,values:l}=i,s;if(!r)return`[${a}]`;let m=l==null?void 0:l[r];if(typeof m=="string"?s=m:s=m(o&&"instanceIndex"in o?o.instanceIndex:void 0),!(o==null?void 0:o.operator))return`[${a}="${s}"]`;switch(o.operator){case"prefixed":return`[${a}^="${s}"]`;case"suffixed":return`[${a}$="${s}"]`;case"contains":return`[${a}*="${s}"]`}};var ee="https://cdn.jsdelivr.net/npm/@finsweet/attributes-cmscore@1.0.14/cmscore.js";var b=()=>p(void 0,null,function*(){let{fsAttributes:e}=window;if(e.cms||(e.cms={}),e.cms.coreImport)return e.cms.coreImport;try{let t=import(ee);return e.cms.coreImport=t,t}catch(t){u.alert(`${t}`,"error");return}});var v="fs-cmsnest",d={element:{key:`${v}-element`,values:{list:"list"}},collection:{key:`${v}-collection`},empty:{key:`${v}-empty`}},f=B(d);var{collection:{key:F},empty:{key:te}}=d,O=({createCMSListInstances:e})=>{let t=new Map,n=e([f("collection")]);for(let r of n){let o=r.getAttribute(F);if(!o)continue;let i=document.querySelector(`[${te}^="${o}"]`);i&&i.remove(),r.wrapper.remove(),t.set(o,{listInstance:r,emptyElement:i})}return t},q=e=>{let t=new Map,n=e.querySelectorAll(f("collection"));for(let r of n){let o=r.getAttribute(F);!o||t.set(o,r)}return t};var oe=new DOMParser,N=(o,i,a)=>p(void 0,[o,i,a],function*({element:e,href:t},n,{CMSList:r}){if(!t)return;let l=q(e);if(!l.size)return;let m=yield(yield fetch(t)).text(),U=oe.parseFromString(m,"text/html"),j=L([f("collection")],U);for(let K of j){let h=new r(K),w=h.getAttribute(d.collection.key);if(!w)continue;let M=n.get(w),C=l.get(w);if(!M||!C)continue;let P=C.parentElement;if(!P)continue;let{listInstance:W,emptyElement:T}=M,A=h.items.reduce((c,{href:I})=>{if(!I)return c;let x=W.items.find(k=>k.href&&I===k.href);return x&&c.push(x.element),c},[]);if(!A.length&&!T)continue;let S=E(W.wrapper),H=g(S,"items");if(A.length)for(let c of H)!!A.find(x=>x.isEqualNode(c))||c.remove();else if(T){let c=g(S,"list");c==null||c.remove(),S.appendChild(E(T))}P.insertBefore(S,C),C.remove()}});var $=()=>p(void 0,null,function*(){let e=yield b();if(!e)return;let t=e.createCMSListInstances([f("element","list",{operator:"prefixed"})]);for(let n of t)ne(n,e)}),ne=(e,t)=>p(void 0,null,function*(){let n=O(t);if(!n.size)return;e.on("shouldnest",o=>p(void 0,null,function*(){yield Promise.all(o.map(i=>N(i,n,t)))}));let r=[...e.items];yield Promise.all(r.map(o=>N(o,n,t))),yield e.emitSerial("nestinitialitems",r)});V();var{currentScript:re}=document,{preventsLoad:ie}=R(re);b();ie?window.fsAttributes.cmsnest={init:$}:(window.Webflow||(window.Webflow=[]),window.Webflow.push($));})();
