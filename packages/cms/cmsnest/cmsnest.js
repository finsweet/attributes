(()=>{var p=(e,t,o)=>new Promise((i,r)=>{var n=l=>{try{s(o.next(l))}catch(c){r(c)}},f=l=>{try{s(o.throw(l))}catch(c){r(c)}},s=l=>l.done?i(l.value):Promise.resolve(l.value).then(n,f);s((o=o.apply(e,t)).next())});var m=class{static activateAlerts(){this.alertsActivated=!0}static alert(t,o){if(this.alertsActivated&&window.alert(t),o==="error")throw new Error(t)}};m.alertsActivated=!1;var b={wrapper:"w-dyn-list",list:"w-dyn-items",item:"w-dyn-item",paginationWrapper:"w-pagination-wrapper",paginationNext:"w-pagination-next",paginationPrevious:"w-pagination-previous",pageCount:"w-page-count",emptyState:"w-dyn-empty"};var w=(e,t=!0)=>e.cloneNode(t);var{wrapper:X,list:J,paginationWrapper:Q,paginationNext:Y,paginationPrevious:Z,emptyState:ee,pageCount:te}=b;function g(e,t,o=document){let i=typeof e=="string"?o.querySelector(e):e;if(!i)return;let r=i.closest(`.${X}`);if(!r)return;let n=r.querySelector(`.${J}`);return t==="wrapper"?r:t==="list"?n:t==="items"?[...(n==null?void 0:n.children)||[]]:t==="pageCount"?r.querySelector(`.${te}`):t==="empty"?r.querySelector(`:scope > .${ee}`):t==="pagination"?r.querySelector(`.${Q}`):r.querySelector(`.${t==="next"?Y:Z}`)}var N=(e,t=document)=>{e=e.filter(n=>n);let o=e.join(", ")||`.${b.wrapper}`;return[...t.querySelectorAll(o)].reduce((n,f)=>{if(!f)return n;let s=g(f,"wrapper");return!s||n.includes(s)||n.push(s),n},[])};var B="fs-attributes",O={preventLoad:{key:`${B}-preventload`},debugMode:{key:`${B}-debug`}};var V=e=>{let{preventLoad:t,debugMode:o}=O,i=typeof(e==null?void 0:e.getAttribute(t.key))=="string";return typeof(e==null?void 0:e.getAttribute(o.key))=="string"&&m.activateAlerts(),{preventsLoad:i}};var F=()=>{window.fsAttributes||(window.fsAttributes={cms:{}})};var oe="https://cdn.jsdelivr.net/npm/@finsweet/attributes-cmscore@1/cmscore.js",T=()=>p(void 0,null,function*(){let{fsAttributes:e}=window;e.cms||(e.cms={});let{cms:t}=e;if(t.coreImport)return t.coreImport;try{let o=import(oe);return t.coreImport=o,o.then(i=>{i&&(t.coreVersion||(t.coreVersion=i.version))}),o}catch(o){m.alert(`${o}`,"error");return}});function C(e){return e==null?void 0:e.trim().toLowerCase()}var R=e=>{let t=(i,r,n)=>{let f=e[i],{key:s,values:l}=f,c;if(!r)return`[${s}]`;let d=l==null?void 0:l[r];if(typeof d=="string"?c=d:c=d(n&&"instanceIndex"in n?n.instanceIndex:void 0),!(n==null?void 0:n.operator))return`[${s}="${c}"]`;switch(n.operator){case"prefixed":return`[${s}^="${c}"]`;case"suffixed":return`[${s}$="${c}"]`;case"contains":return`[${s}*="${c}"]`}};return[t,(i,r)=>{let n=t("element",i,r);return((r==null?void 0:r.scope)||document).querySelector(n)}]};var P="fs-cmsnest",S={element:{key:`${P}-element`,values:{list:"list"}},collection:{key:`${P}-collection`},empty:{key:`${P}-empty`}},[u,Be]=R(S);var{collection:{key:q},empty:{key:re}}=S,K=({createCMSListInstances:e})=>{let t=new Map,o=e([u("collection")]);for(let i of o){let r=C(i.getAttribute(q));if(!r)continue;let n=document.querySelector(`[${re}^="${r}"]`);n&&n.remove(),i.wrapper.remove(),t.set(r,{listInstance:i,emptyElement:n})}return t},H=e=>{let t=new Map,o=e.querySelectorAll(u("collection"));for(let i of o){let r=C(i.getAttribute(q));!r||t.set(r,i)}return t};var ne=new DOMParser,$=(r,n,f)=>p(void 0,[r,n,f],function*({element:e,href:t},o,{CMSList:i}){if(!t)return;let s=H(e);if(!s.size)return;let c=yield(yield fetch(t)).text(),d=ne.parseFromString(c,"text/html");N([u("collection")],d).forEach((j,z)=>{let M=new i(j,z),A=C(M.getAttribute(S.collection.key));if(!A)return;let k=o.get(A),E=s.get(A);if(!k||!E)return;let W=E.parentElement;if(!W)return;let{listInstance:_,emptyElement:L}=k,I=M.items.reduce((a,{href:v})=>{if(!v)return a;let y=_.items.find(D=>D.href&&v===D.href);return y&&a.push(y.element),a},[]);if(!I.length&&!L)return;let x=w(_.wrapper),G=g(x,"items");if(I.length)for(let a of G)!!I.find(y=>y.isEqualNode(a))||a.remove();else if(L){let a=g(x,"list");a==null||a.remove(),x.appendChild(w(L))}W.insertBefore(x,E),E.remove()})});var h=()=>p(void 0,null,function*(){let e=yield T();if(!e)return[];let t=e.createCMSListInstances([u("element","list",{operator:"prefixed"})]);for(let o of t)U(o,e);return yield Promise.all(t.map(o=>U(o,e))),t}),U=(e,t)=>p(void 0,null,function*(){let o=K(t);if(!o.size){m.alert(`No collections to nest found for the list n\xBA ${e.index}`,"info");return}e.on("shouldnest",r=>p(void 0,null,function*(){yield Promise.all(r.map(n=>$(n,o,t)))}));let i=[...e.items];yield Promise.all(i.map(r=>$(r,o,t))),yield e.emitSerial("nestinitialitems",i)});F();var{currentScript:ie}=document,{preventsLoad:se}=V(ie);T();se?window.fsAttributes.cmsnest={init:h}:(window.Webflow||(window.Webflow=[]),window.Webflow.push(h));})();
