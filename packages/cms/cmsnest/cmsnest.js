(()=>{var Q=Object.defineProperty;var Z=(t,e,o)=>e in t?Q(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var K=(t,e,o)=>(Z(t,typeof e!="symbol"?e+"":e,o),o);var p=(t,e,o)=>new Promise((n,r)=>{var s=c=>{try{i(o.next(c))}catch(l){r(l)}},f=c=>{try{i(o.throw(c))}catch(l){r(l)}},i=c=>c.done?n(c.value):Promise.resolve(c.value).then(s,f);i((o=o.apply(t,e)).next())});var a=class{static activateAlerts(){this.alertsActivated=!0}static alert(e,o){if(this.alertsActivated&&window.alert(e),o==="error")throw new Error(e)}};K(a,"alertsActivated",!1);var E={wrapper:"w-dyn-list",list:"w-dyn-items",item:"w-dyn-item",paginationWrapper:"w-pagination-wrapper",paginationNext:"w-pagination-next",paginationPrevious:"w-pagination-previous",pageCount:"w-page-count",emptyState:"w-dyn-empty"};var A=(t,e=!0)=>t.cloneNode(e);var{wrapper:ee,list:te,paginationWrapper:oe,paginationNext:re,paginationPrevious:ne,emptyState:se,pageCount:ie}=E;function d(t,e,o=document){let n=typeof t=="string"?o.querySelector(t):t;if(!n)return;let r=n.closest(`.${ee}`);if(!r)return;let s=r.querySelector(`.${te}`);return e==="wrapper"?r:e==="list"?s:e==="items"?[...(s==null?void 0:s.children)||[]]:e==="pageCount"?r.querySelector(`.${ie}`):e==="empty"?r.querySelector(`:scope > .${se}`):e==="pagination"?r.querySelector(`.${oe}`):r.querySelector(`.${e==="next"?re:ne}`)}var v=(t,e=document)=>{t=t.filter(s=>s);let o=t.join(", ")||`.${E.wrapper}`;return[...e.querySelectorAll(o)].reduce((s,f)=>{if(!f)return s;let i=d(f,"wrapper");return!i||s.includes(i)||s.push(i),s},[])};var W="fs-attributes",q={preventLoad:{key:`${W}-preventload`},debugMode:{key:`${W}-debug`}};var F=t=>{let{preventLoad:e,debugMode:o}=q,n=typeof(t==null?void 0:t.getAttribute(e.key))=="string";return typeof(t==null?void 0:t.getAttribute(o.key))=="string"&&a.activateAlerts(),{preventsLoad:n}};var D=()=>{window.fsAttributes||(window.fsAttributes={cms:{}})};var ce="https://cdn.jsdelivr.net/npm/@finsweet/attributes-cmscore@1/cmscore.js",T=()=>p(void 0,null,function*(){let{fsAttributes:t}=window;t.cms||(t.cms={});let{cms:e}=t;if(e.coreImport)return e.coreImport;try{let o=import(ce);return e.coreImport=o,o.then(n=>{n&&(e.coreVersion||(e.coreVersion=n.version))}),o}catch(o){a.alert(`${o}`,"error");return}});function y(t){return t==null?void 0:t.trim().toLowerCase()}var U=t=>{let e=(n,r,s)=>{let f=t[n],{key:i,values:c}=f,l;if(!r)return`[${i}]`;let x=c==null?void 0:c[r];if(typeof x=="string"?l=x:l=x(s&&"instanceIndex"in s?s.instanceIndex:void 0),!(s==null?void 0:s.operator))return`[${i}="${l}"]`;switch(s.operator){case"prefixed":return`[${i}^="${l}"]`;case"suffixed":return`[${i}$="${l}"]`;case"contains":return`[${i}*="${l}"]`}};return[e,(n,r)=>{let s=e("element",n,r);return((r==null?void 0:r.scope)||document).querySelector(s)}]};var $="cmsnest",_=`fs-${$}`,le="list",me="collection",pe="empty",g={element:{key:`${_}-element`,values:{list:le}},collection:{key:`${_}-${me}`},empty:{key:`${_}-${pe}`}},[u,ze]=U(g);var{collection:{key:z},empty:{key:ae}}=g,H=({createCMSListInstances:t})=>{let e=new Map,o=t([u("collection")]);for(let n of o){let r=y(n.getAttribute(z));if(!r)continue;let s=document.querySelector(`[${ae}^="${r}"]`);s&&(s.style.display="none"),n.wrapper.style.display="none",e.set(r,{listInstance:n,emptyElement:s})}return e},G=t=>{let e=new Map,o=t.querySelectorAll(u("collection"));for(let n of o){let r=y(n.getAttribute(z));!r||e.set(r,n)}return e};var ue=new DOMParser,I=(r,s,f)=>p(void 0,[r,s,f],function*({element:t,href:e},o,{CMSList:n}){if(!e)return;let i=G(t);if(!i.size)return;let l=yield(yield fetch(e)).text(),x=ue.parseFromString(l,"text/html");v([u("collection")],x).forEach((X,Y)=>{let P=new n(X,Y),L=y(P.getAttribute(g.collection.key));if(!L)return;let R=o.get(L),w=i.get(L);if(!R||!w)return;let O=w.parentElement;if(!O)return;let{listInstance:B,emptyElement:M}=R,N=P.items.reduce((m,{href:S})=>{if(!S)return m;let b=B.items.find(V=>V.href&&S===V.href);return b&&m.push(b.element),m},[]);if(!N.length&&!M)return;let C=A(B.wrapper),J=d(C,"items");if(C.style.display="",N.length)for(let m of J)!!N.find(b=>b.isEqualNode(m))||m.remove();else if(M){let m=d(C,"list");m==null||m.remove();let S=A(M);S.style.display="",C.appendChild(S)}O.insertBefore(C,w),w.remove()})});var j=(t,e,o)=>{t.on("shouldnest",n=>p(void 0,null,function*(){yield Promise.all(n.map(r=>I(r,e,o)))}))};var h=(t,e)=>p(void 0,null,function*(){let o=H(e);if(!o.size){a.alert(`No collections to nest found for the list n\xBA ${t.index}`,"info");return}j(t,o,e);let n=[...t.items];yield Promise.all(n.map(r=>I(r,o,e))),yield t.emitSerial("nestinitialitems",n)});var k=()=>p(void 0,null,function*(){let t=yield T();if(!t)return[];let e=t.createCMSListInstances([u("element","list",{operator:"prefixed"})]);for(let o of e)h(o,t);return yield Promise.all(e.map(o=>h(o,t))),e});D();var{currentScript:fe}=document,{preventsLoad:Se}=F(fe);T();Se?window.fsAttributes[$]={init:k}:(window.Webflow||(window.Webflow=[]),window.Webflow.push(k));})();
