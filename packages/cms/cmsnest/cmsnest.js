(()=>{var m=(e,t,o)=>new Promise((n,r)=>{var s=l=>{try{i(o.next(l))}catch(c){r(c)}},f=l=>{try{i(o.throw(l))}catch(c){r(c)}},i=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,f);i((o=o.apply(e,t)).next())});var p=class{static activateAlerts(){this.alertsActivated=!0}static alert(t,o){if(this.alertsActivated&&window.alert(t),o==="error")throw new Error(t)}};p.alertsActivated=!1;var w={wrapper:"w-dyn-list",list:"w-dyn-items",item:"w-dyn-item",paginationWrapper:"w-pagination-wrapper",paginationNext:"w-pagination-next",paginationPrevious:"w-pagination-previous",pageCount:"w-page-count",emptyState:"w-dyn-empty"};var T=(e,t=!0)=>e.cloneNode(t);var{wrapper:J,list:Q,paginationWrapper:Z,paginationNext:ee,paginationPrevious:te,emptyState:oe,pageCount:re}=w;function g(e,t,o=document){let n=typeof e=="string"?o.querySelector(e):e;if(!n)return;let r=n.closest(`.${J}`);if(!r)return;let s=r.querySelector(`.${Q}`);return t==="wrapper"?r:t==="list"?s:t==="items"?[...(s==null?void 0:s.children)||[]]:t==="pageCount"?r.querySelector(`.${re}`):t==="empty"?r.querySelector(`:scope > .${oe}`):t==="pagination"?r.querySelector(`.${Z}`):r.querySelector(`.${t==="next"?ee:te}`)}var $=(e,t=document)=>{e=e.filter(s=>s);let o=e.join(", ")||`.${w.wrapper}`;return[...t.querySelectorAll(o)].reduce((s,f)=>{if(!f)return s;let i=g(f,"wrapper");return!i||s.includes(i)||s.push(i),s},[])};var R="fs-attributes",V={preventLoad:{key:`${R}-preventload`},debugMode:{key:`${R}-debug`}};var F=e=>{let{preventLoad:t,debugMode:o}=V,n=typeof(e==null?void 0:e.getAttribute(t.key))=="string";return typeof(e==null?void 0:e.getAttribute(o.key))=="string"&&p.activateAlerts(),{preventsLoad:n}};var K=()=>{window.fsAttributes||(window.fsAttributes={cms:{}})};var ne="https://cdn.jsdelivr.net/npm/@finsweet/attributes-cmscore@1/cmscore.js",A=()=>m(void 0,null,function*(){let{fsAttributes:e}=window;e.cms||(e.cms={});let{cms:t}=e;if(t.coreImport)return t.coreImport;try{let o=import(ne);return t.coreImport=o,o.then(n=>{n&&(t.coreVersion||(t.coreVersion=n.version))}),o}catch(o){p.alert(`${o}`,"error");return}});function E(e){return e==null?void 0:e.trim().toLowerCase()}var q=e=>{let t=(n,r,s)=>{let f=e[n],{key:i,values:l}=f,c;if(!r)return`[${i}]`;let S=l==null?void 0:l[r];if(typeof S=="string"?c=S:c=S(s&&"instanceIndex"in s?s.instanceIndex:void 0),!(s==null?void 0:s.operator))return`[${i}="${c}"]`;switch(s.operator){case"prefixed":return`[${i}^="${c}"]`;case"suffixed":return`[${i}$="${c}"]`;case"contains":return`[${i}*="${c}"]`}};return[t,(n,r)=>{let s=t("element",n,r);return((r==null?void 0:r.scope)||document).querySelector(s)}]};var M="cmsnest",P=`fs-${M}`,se="list",ie="collection",le="empty",x={element:{key:`${P}-element`,values:{list:se}},collection:{key:`${P}-${ie}`},empty:{key:`${P}-${le}`}},[u,Ke]=q(x);var{collection:{key:U},empty:{key:ce}}=x,H=({createCMSListInstances:e})=>{let t=new Map,o=e([u("collection")]);for(let n of o){let r=E(n.getAttribute(U));if(!r)continue;let s=document.querySelector(`[${ce}^="${r}"]`);s&&(s.style.display="none"),n.wrapper.style.display="none",t.set(r,{listInstance:n,emptyElement:s})}return t},j=e=>{let t=new Map,o=e.querySelectorAll(u("collection"));for(let n of o){let r=E(n.getAttribute(U));!r||t.set(r,n)}return t};var ae=new DOMParser,L=(r,s,f)=>m(void 0,[r,s,f],function*({element:e,href:t},o,{CMSList:n}){if(!t)return;let i=j(e);if(!i.size)return;let c=yield(yield fetch(t)).text(),S=ae.parseFromString(c,"text/html");$([u("collection")],S).forEach((G,X)=>{let k=new n(G,X),I=E(k.getAttribute(x.collection.key));if(!I)return;let W=o.get(I),y=i.get(I);if(!W||!y)return;let D=y.parentElement;if(!D)return;let{listInstance:B,emptyElement:v}=W,N=k.items.reduce((a,{href:d})=>{if(!d)return a;let b=B.items.find(O=>O.href&&d===O.href);return b&&a.push(b.element),a},[]);if(!N.length&&!v)return;let C=T(B.wrapper),Y=g(C,"items");if(C.style.display="",N.length)for(let a of Y)!!N.find(b=>b.isEqualNode(a))||a.remove();else if(v){let a=g(C,"list");a==null||a.remove();let d=T(v);d.style.display="",C.appendChild(d)}D.insertBefore(C,y),y.remove()})});var z=(e,t,o)=>{e.on("shouldnest",n=>m(void 0,null,function*(){yield Promise.all(n.map(r=>L(r,t,o)))}))};var h=(e,t)=>m(void 0,null,function*(){let o=H(t);if(!o.size){p.alert(`No collections to nest found for the list n\xBA ${e.index}`,"info");return}z(e,o,t);let n=[...e.items];yield Promise.all(n.map(r=>L(r,o,t))),yield e.emitSerial("nestinitialitems",n)});var _=()=>m(void 0,null,function*(){let e=yield A();if(!e)return[];let t=e.createCMSListInstances([u("element","list",{operator:"prefixed"})]);for(let o of t)h(o,e);return yield Promise.all(t.map(o=>h(o,e))),t});K();var{currentScript:me}=document,{preventsLoad:pe}=F(me);A();pe?window.fsAttributes[M]={init:_}:(window.Webflow||(window.Webflow=[]),window.Webflow.push(_));})();
