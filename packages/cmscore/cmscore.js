var It=Object.create;var B=Object.defineProperty,Mt=Object.defineProperties,Lt=Object.getOwnPropertyDescriptor,Tt=Object.getOwnPropertyDescriptors,Ot=Object.getOwnPropertyNames,D=Object.getOwnPropertySymbols,vt=Object.getPrototypeOf,U=Object.prototype.hasOwnProperty,it=Object.prototype.propertyIsEnumerable;var H=(r,t,e)=>t in r?B(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,x=(r,t)=>{for(var e in t||(t={}))U.call(t,e)&&H(r,e,t[e]);if(D)for(var e of D(t))it.call(t,e)&&H(r,e,t[e]);return r},L=(r,t)=>Mt(r,Tt(t));var nt=(r,t)=>{var e={};for(var o in r)U.call(r,o)&&t.indexOf(o)<0&&(e[o]=r[o]);if(r!=null&&D)for(var o of D(r))t.indexOf(o)<0&&it.call(r,o)&&(e[o]=r[o]);return e};var _t=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports);var Wt=(r,t,e,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Ot(t))!U.call(r,i)&&i!==e&&B(r,i,{get:()=>t[i],enumerable:!(o=Lt(t,i))||o.enumerable});return r};var Dt=(r,t,e)=>(e=r!=null?It(vt(r)):{},Wt(t||!r||!r.__esModule?B(e,"default",{value:r,enumerable:!0}):e,r));var st=(r,t,e)=>(H(r,typeof t!="symbol"?t+"":t,e),e);var dt=_t((Be,ft)=>{"use strict";var S=new WeakMap,j=new WeakMap,v=new WeakMap,Y=Symbol("anyProducer"),lt=Promise.resolve(),q=Symbol("listenerAdded"),F=Symbol("listenerRemoved"),y=Symbol("metaEventsAllowed"),J=!1;function P(r,t){if(typeof r!="string"&&typeof r!="symbol"&&typeof r!="number")throw new TypeError("`eventName` must be a string, symbol, or number");if($(r)&&t!==y)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`")}function k(r){if(typeof r!="function")throw new TypeError("listener must be a function")}function A(r,t){let e=j.get(r);return e.has(t)||e.set(t,new Set),e.get(t)}function _(r,t){let e=typeof t=="string"||typeof t=="symbol"||typeof t=="number"?t:Y,o=v.get(r);return o.has(e)||o.set(e,new Set),o.get(e)}function Ut(r,t,e){let o=v.get(r);if(o.has(t))for(let i of o.get(t))i.enqueue(e);if(o.has(Y)){let i=Promise.all([t,e]);for(let n of o.get(Y))n.enqueue(i)}}function pt(r,t){t=Array.isArray(t)?t:[t];let e=!1,o=()=>{},i=[],n={enqueue(s){i.push(s),o()},finish(){e=!0,o()}};for(let s of t)_(r,s).add(n);return{async next(){return i?i.length===0?e?(i=void 0,this.next()):(await new Promise(s=>{o=s}),this.next()):{done:!1,value:await i.shift()}:{done:!0}},async return(s){i=void 0;for(let a of t)_(r,a).delete(n);return o(),arguments.length>0?{done:!0,value:await s}:{done:!0}},[Symbol.asyncIterator](){return this}}}function ut(r){if(r===void 0)return mt;if(!Array.isArray(r))throw new TypeError("`methodNames` must be an array of strings");for(let t of r)if(!mt.includes(t))throw typeof t!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${t} is not Emittery method`);return r}var $=r=>r===q||r===F,w=class{static mixin(t,e){return e=ut(e),o=>{if(typeof o!="function")throw new TypeError("`target` must be function");for(let s of e)if(o.prototype[s]!==void 0)throw new Error(`The property \`${s}\` already exists on \`target\``);function i(){return Object.defineProperty(this,t,{enumerable:!1,value:new w}),this[t]}Object.defineProperty(o.prototype,t,{enumerable:!1,get:i});let n=s=>function(...a){return this[t][s](...a)};for(let s of e)Object.defineProperty(o.prototype,s,{enumerable:!1,value:n(s)});return o}}static get isDebugEnabled(){if(typeof process!="object")return J;let{env:t}=process||{env:{}};return t.DEBUG==="emittery"||t.DEBUG==="*"||J}static set isDebugEnabled(t){J=t}constructor(t={}){S.set(this,new Set),j.set(this,new Map),v.set(this,new Map),this.debug=t.debug||{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(e,o,i,n)=>{try{n=JSON.stringify(n)}catch(c){n=`Object with the following keys failed to stringify: ${Object.keys(n).join(",")}`}(typeof i=="symbol"||typeof i=="number")&&(i=i.toString());let s=new Date,a=`${s.getHours()}:${s.getMinutes()}:${s.getSeconds()}.${s.getMilliseconds()}`;console.log(`[${a}][emittery:${e}][${o}] Event Name: ${i}
	data: ${n}`)})}logIfDebugEnabled(t,e,o){(w.isDebugEnabled||this.debug.enabled)&&this.debug.logger(t,this.debug.name,e,o)}on(t,e){k(e),t=Array.isArray(t)?t:[t];for(let o of t)P(o,y),A(this,o).add(e),this.logIfDebugEnabled("subscribe",o,void 0),$(o)||this.emit(q,{eventName:o,listener:e},y);return this.off.bind(this,t,e)}off(t,e){k(e),t=Array.isArray(t)?t:[t];for(let o of t)P(o,y),A(this,o).delete(e),this.logIfDebugEnabled("unsubscribe",o,void 0),$(o)||this.emit(F,{eventName:o,listener:e},y)}once(t){return new Promise(e=>{let o=this.on(t,i=>{o(),e(i)})})}events(t){t=Array.isArray(t)?t:[t];for(let e of t)P(e,y);return pt(this,t)}async emit(t,e,o){P(t,o),this.logIfDebugEnabled("emit",t,e),Ut(this,t,e);let i=A(this,t),n=S.get(this),s=[...i],a=$(t)?[]:[...n];await lt,await Promise.all([...s.map(async c=>{if(i.has(c))return c(e)}),...a.map(async c=>{if(n.has(c))return c(t,e)})])}async emitSerial(t,e,o){P(t,o),this.logIfDebugEnabled("emitSerial",t,e);let i=A(this,t),n=S.get(this),s=[...i],a=[...n];await lt;for(let c of s)i.has(c)&&await c(e);for(let c of a)n.has(c)&&await c(t,e)}onAny(t){return k(t),this.logIfDebugEnabled("subscribeAny",void 0,void 0),S.get(this).add(t),this.emit(q,{listener:t},y),this.offAny.bind(this,t)}anyEvent(){return pt(this)}offAny(t){k(t),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),this.emit(F,{listener:t},y),S.get(this).delete(t)}clearListeners(t){t=Array.isArray(t)?t:[t];for(let e of t)if(this.logIfDebugEnabled("clear",e,void 0),typeof e=="string"||typeof e=="symbol"||typeof e=="number"){A(this,e).clear();let o=_(this,e);for(let i of o)i.finish();o.clear()}else{S.get(this).clear();for(let o of j.get(this).values())o.clear();for(let o of v.get(this).values()){for(let i of o)i.finish();o.clear()}}}listenerCount(t){t=Array.isArray(t)?t:[t];let e=0;for(let o of t){if(typeof o=="string"){e+=S.get(this).size+A(this,o).size+_(this,o).size+_(this).size;continue}typeof o!="undefined"&&P(o,y),e+=S.get(this).size;for(let i of j.get(this).values())e+=i.size;for(let i of v.get(this).values())e+=i.size}return e}bindMethods(t,e){if(typeof t!="object"||t===null)throw new TypeError("`target` must be an object");e=ut(e);for(let o of e){if(t[o]!==void 0)throw new Error(`The property \`${o}\` already exists on \`target\``);Object.defineProperty(t,o,{enumerable:!1,value:this[o].bind(this)})}}},mt=Object.getOwnPropertyNames(w.prototype).filter(r=>r!=="constructor");Object.defineProperty(w,"listenerAdded",{value:q,writable:!1,enumerable:!0,configurable:!1});Object.defineProperty(w,"listenerRemoved",{value:F,writable:!1,enumerable:!0,configurable:!1});ft.exports=w});var ct="@finsweet/attributes-cmscore",Rt="1.6.7";var h=class{static activateAlerts(){this.alertsActivated=!0}static alert(t,e){if(this.alertsActivated&&window.alert(t),e==="error")throw new Error(t)}};st(h,"alertsActivated",!1);var E={wrapper:"w-dyn-list",list:"w-dyn-items",item:"w-dyn-item",paginationWrapper:"w-pagination-wrapper",paginationNext:"w-pagination-next",paginationPrevious:"w-pagination-previous",pageCount:"w-page-count",emptyState:"w-dyn-empty"};var T=(r,t)=>!!r&&t.includes(r);var V=r=>{let t=r.split("-"),e=parseInt(t[t.length-1]);if(!isNaN(e))return e};var Q=r=>Object.keys(r);var z=r=>new Promise(t=>setTimeout(t,r));var K=r=>r!=null;var{wrapper:kt,list:jt,paginationWrapper:$t,paginationNext:qt,paginationPrevious:Ft,emptyState:Ht,pageCount:Bt}=E;function d(r,t,e=document){let o=typeof r=="string"?e.querySelector(r):r;if(!o)return;let i=o.closest(`.${kt}`);if(!i)return;let n=i.querySelector(`.${jt}`);return t==="wrapper"?i:t==="list"?n:t==="items"?[...(n==null?void 0:n.children)||[]]:t==="pageCount"?i.querySelector(`.${Bt}`):t==="empty"?i.querySelector(`:scope > .${Ht}`):t==="pagination"?i.querySelector(`.${$t}`):i.querySelector(`.${t==="next"?qt:Ft}`)}var O=(r,t=document)=>{r=r.filter(n=>n);let e=r.join(", ")||`.${E.wrapper}`;return[...t.querySelectorAll(e)].reduce((n,s)=>{if(!s)return n;let a=d(s,"wrapper");return!a||n.includes(a)||n.push(a),n},[])};var G=()=>document.documentElement.getAttribute("data-wf-site");var R=async r=>{var e,o,i;let{Webflow:t}=window;if(!(!t||!("destroy"in t)||!("ready"in t)||!("require"in t))&&!(r&&!r.length)){if(r||(t.destroy(),t.ready()),!r||r.includes("ix2")){let n=t.require("ix2");if(n){let{store:s,actions:a}=n,{eventState:c}=s.getState().ixSession,p=Object.entries(c);r||n.destroy(),n.init(),await Promise.all(p.map(l=>s.dispatch(a.eventStateChanged(...l))))}}if(!r||r.includes("commerce")){let n=t.require("commerce"),s=G();n&&s&&(n.destroy(),n.init({siteId:s,apiUrl:"https://render.webflow.com"}))}return r!=null&&r.includes("lightbox")&&((e=t.require("lightbox"))==null||e.ready()),r!=null&&r.includes("slider")&&((o=t.require("slider"))==null||o.redraw()),r!=null&&r.includes("tabs")&&((i=t.require("tabs"))==null||i.redraw()),new Promise(n=>t.push(()=>n(void 0)))}};var X=(r,t)=>{let e=r.getAttribute(t);return e?V(e):void 0};var Et=Dt(dt(),1);function Z(r){return r==null?void 0:r.trim().toLowerCase()}var I=class{constructor(t,e,o){this.element=t;this.list=e;this.currentIndex=o;this.props={};this.valid=!0;var n;this.href=(n=t.querySelector("a"))==null?void 0:n.href;let i=typeof o=="number";this.needsWebflowRestart=!i}collectProps({fieldKey:t,typeKey:e,rangeKey:o}){let{element:i,props:n}=this,s=[...i.querySelectorAll(`[${t}]`)];for(let a of s){let c=Z(a.getAttribute(t));if(!c)return;let{textContent:p,innerHTML:l}=a;if(!p)continue;let u=e?a.getAttribute(e):void 0,m=o?a.getAttribute(o):void 0;n[c]||(n[c]={type:u,range:m,values:new Set,elements:new Map});let g=n[c],{values:f,elements:b}=g;if(m==="from"||m==="to"){let C=[...f];C[m==="from"?0:1]=p,g.values=new Set(C)}f.add(p),b.has(p)||b.set(p,{element:a,originalHTML:l})}}};var N=(r,t)=>{r.textContent=`${t}`};var Vt=new DOMParser,tt=async r=>{let e=await(await fetch(r)).text();return Vt.parseFromString(e,"text/html")};var{location:ht,history:Qt}=window,gt,bt=r=>{if(!r)return;let{href:t}=r,{searchParams:e}=new URL(t);return[...e.entries()]},zt=async({paginationNext:r,paginationPrevious:t,index:e})=>{let o=bt(r||t);if(!o||!o.length)return;let i,n;if(o.length===1){let[a]=o;if(!a)return;[i,n]=a}else try{let{origin:a,pathname:c}=ht;gt||(gt=tt(a+c));let p=await gt,u=O([],p)[e];if(!u)return;let m=d(u,"next"),[g]=bt(m)||[];if(!g)return;[i]=g,[,n]=o.find(([f])=>f===i)||[]}catch(a){return}if(!i||!n)return;let s=parseInt(n);return[i,s]},yt=r=>{let{paginationNext:t}=r;r.extractingPaginationData=new Promise(async e=>{let o=await zt(r);if(!o){e();return}let[i,n]=o;r.pagesQuery=i,r.currentPage=t?n-1:n+1,e()})},wt=({currentPage:r,pagesQuery:t})=>{if(!t||!r)return;let e=new URL(ht.href),{searchParams:o}=e;o.set(t,`${r}`),Qt.replaceState(null,"",e.toString())};var St=async(r,{items:t,restartWebflow:e,restartIx:o,restartCommerce:i,restartLightbox:n,restartSliders:s,restartTabs:a})=>{let c=[[o,"ix2"],[i,"commerce"],[n,"lightbox"],[s,"slider"],[a,"tabs"]];if(!e&&!c.some(([l])=>l)||!r.some(({needsWebflowRestart:l})=>l))return;for(let l of t){let u=r.includes(l);l.needsWebflowRestart=!u}if(e){await R();return}let p=c.reduce((l,[u,m])=>(u&&l.push(m),l),[]);await R(p)};var Ct=async(r,t=!1,e=!0)=>{let{items:o,itemsPerPage:i,paginationActive:n,currentPage:s,emptyState:a}=r,c=[],p=[],l=[];for(let f of o){let{valid:b,currentIndex:C}=f,M=typeof C=="number";if(b){if(c.push(f),!n||!s){l.push(f);continue}c.length>(s-1)*i&&c.length<=s*i?l.push(f):M&&p.push(f)}else M&&p.push(f)}r.validItems=c,r.totalPages=Math.ceil(c.length/i)||1;let u=!c.length;r.emptyState=u;let m=[];l.forEach((f,b)=>{f.currentIndex!==b&&m.push([f,b,l[b-1]])});let g=e&&!t||a!==u;return g&&await r.displayElement(a?"emptyElement":"list",!1),await Promise.all([...Kt(p,r,t),...Gt(m,r,t)]),await r.emitSerial("renderitems",l),await St(l,r),g&&await r.displayElement(u?"emptyElement":"list"),l},Kt=(r,{itemsAnimation:t},e)=>r.map(async o=>{let{element:i}=o;if(e&&t){let{animateOut:n,options:s}=t;await n(i,x({remove:!0},s))}else i.remove();o.currentIndex=void 0}),Gt=(r,{list:t,itemsAnimation:e},o)=>t?r.map(async([i,n,s],a)=>{i.animating=new Promise(async c=>{i.rendering=new Promise(async p=>{await(s==null?void 0:s.rendering);let{element:l,currentIndex:u}=i,m=(s==null?void 0:s.element)||null;if(typeof u!="number"&&o&&e){let{prepareIn:f,animateIn:b,options:C}=e,g=C||{},{stagger:M}=g,rt=nt(g,["stagger"]),ot=x({target:t,insertAfter:m},rt);f(l,ot),xt(l),p(),M&&await z(M*a),await b(l,L(x({},ot),{prepared:!0}))}else m?t.insertBefore(l,m.nextSibling):t.prepend(l),xt(l),p();c()})}),await i.rendering,i.currentIndex=n}):[],xt=r=>{if(!/apple/i.test(navigator.vendor))return;let t=r.querySelectorAll("img");for(let e of t)e.outerHTML=e.outerHTML};var W=class extends Et.default{constructor(e,o){super();this.wrapper=e;this.index=o;this.emptyState=!1;this.paginationActive=!1;this.showPaginationQuery=!1;this.restartWebflow=!1;this.restartIx=!1;this.restartCommerce=!1;this.restartLightbox=!1;this.restartSliders=!1;this.restartTabs=!1;let i=d(e,"list");this.list=i,this.paginationWrapper=d(e,"pagination"),this.paginationNext=d(e,"next"),this.paginationPrevious=d(e,"previous"),this.paginationCount=d(e,"pageCount"),this.emptyElement=d(e,"empty");let n=d(e,"items");this.itemsPerPage=this.originalItemsPerPage=n.length,this.totalPages=1,yt(this);let s=[];i&&s.push(...n.map((a,c)=>new I(a,i,c))),this.items=s,this.validItems=s,this.originalItemsOrder=[...s]}async addItems(e,o="push"){let{items:i,list:n,originalItemsOrder:s}=this;if(!n)return;let a=e.map(c=>new I(c,n));for(let c of[i,s])c[o](...a);await this.emit("shouldnest",a),await this.emit("shouldcollectprops",a),await this.emit("shouldsort",a),await this.emit("shouldfilter"),await this.renderItems(!0),await this.emit("additems",a)}restoreItemsOrder(){this.items=[...this.originalItemsOrder]}clearItems(e=!0){if(e)for(let{element:o}of this.items)o.remove();this.items=[],this.originalItemsOrder=[]}async renderItems(e,o){return await this.renderingQueue,new Promise(async i=>{let n=Ct(this,e,o);this.renderingQueue=n;let s=await n;i(s)})}async displayElement(e,o=!0,i=!0){let{listAnimation:n}=this,s=this[e];if(!!s)if(n&&i){let{animateIn:a,animateOut:c,options:p}=n;await(o?a:c)(s,p)}else s.style.display=o?"":"none",s.style.opacity=o?"1":"0"}async switchPage(e,o=!0){let{currentPage:i,showPaginationQuery:n}=this;e!==i&&(await this.emit("switchpage",e),this.currentPage=e,this.scrollToAnchor(),n&&wt(this),o&&await this.renderItems())}initPagination(e){this.paginationActive=!0,this.showPaginationQuery=!!e}addPaginationButton(e,o,i){let{paginationWrapper:n}=this;!n||this[o]||i<0||(e.style.display="none",n.insertBefore(e,n.children[i]),this[o]=e)}addEmptyElement(e){let{wrapper:o,list:i,emptyElement:n}=this;n||(e.style.display="none",o.insertBefore(e,(i==null?void 0:i.nextSibling)||null),this.emptyElement=e)}addLoader(e){let{loader:o}=this;o||(e.style.display="none",this.loader=e)}addItemsCount(e){if(this.itemsCount)return;this.itemsCount=e;let o=()=>N(e,this.items.length);o(),this.on("additems",o)}addVisibleCount(e){if(this.visibleCount)return;this.visibleCount=e;let o=()=>N(e,Math.min(this.itemsPerPage,this.validItems.length));o(),this.on("renderitems",o)}scrollToAnchor(){let{scrollAnchor:e}=this;!e||window.setTimeout(()=>e.scrollIntoView({behavior:"smooth"}),100)}getAttribute(e){let{wrapper:o,list:i}=this;return o.getAttribute(e)||(i==null?void 0:i.getAttribute(e))}getInstanceIndex(e){let{wrapper:o,list:i}=this;return X(o,e)||(i?X(i,e):void 0)}};var Xt=`https://cdn.jsdelivr.net/npm/${ct}@1/cmscore.js`,Jt=async()=>{let{fsAttributes:r}=window;r.cms||(r.cms={});let{cms:t}=r;if(t.coreImport)return t.coreImport;try{let e=import(Xt);return t.coreImport=e,e.then(o=>{o&&(t.coreVersion||(t.coreVersion=o.version))}),e}catch(e){h.alert(`${e}`,"error");return}};var Yt=(r,t)=>{let{coreVersion:e}=window.fsAttributes.cms;if(!e)return!1;let o={numeric:!0,sensitivity:"base"},i=t.localeCompare(e,void 0,o);return i===0||(r===">="?i<0:i>0)};var Zt="https://cdn.jsdelivr.net/npm/@finsweet/attributes-animation@1/functions.js",et=async()=>{let{fsAttributes:r}=window;if(r.animationImport)return r.animationImport;try{let t=import(Zt);return r.animationImport=t,t}catch(t){h.alert(`${t}`,"error");return}};var Pt="fs-attributes";var hr=`${Pt}-support`;var Nt=async(r,{durationKey:t,easingKey:e})=>{let o=await et();if(!o)return;let{animations:{fade:i},easings:n}=o,{listAnimation:s}=r,a=r.getAttribute(t),c=r.getAttribute(e);if(s&&!a&&!c)return;let p=T(c,n)?c:void 0,l=a?parseFloat(a)/2e3:.1;if(!s){r.listAnimation=L(x({},i),{options:{easing:p,duration:l}});return}let{options:u}=s;if(!u){s.options={easing:p,duration:l};return}u.easing||(u.easing=p),a&&(u.duration=l)},te=async(r,{animationKey:t,durationKey:e,easingKey:o,staggerKey:i})=>{let n=await et();if(!n)return;let{animations:s,easings:a}=n,c=r.getAttribute(t),p=T(c,Q(s))?s[c]:s.fade,l=r.getAttribute(e),u=r.getAttribute(o),m=r.getAttribute(i);r.itemsAnimation=L(x({},p),{options:{easing:T(u,a)?u:void 0,duration:l?parseFloat(l)/1e3:void 0,stagger:m?parseFloat(m):void 0}})};var ee=r=>O(r).map(At).filter(K),At=r=>{var s,a;let t=d(r,"wrapper");if(!t){h.alert("The element is not a Collection List.","error");return}let{fsAttributes:e}=window;(s=e.cms).listInstances||(s.listInstances=[]),(a=e.cms).listElements||(a.listElements=[...document.querySelectorAll(`.${E.wrapper}`)]);let{listInstances:o,listElements:i}=e.cms,n=i.indexOf(t);if(n!==-1)return o[n]||(o[n]=new W(t,n)),o[n]};export{I as CMSItem,W as CMSList,te as addItemsAnimation,Nt as addListAnimation,Yt as checkCMSCoreVersion,At as createCMSListInstance,ee as createCMSListInstances,tt as fetchPageDocument,Jt as importCMSCore,Z as normalizePropKey,Rt as version};
